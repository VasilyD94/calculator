# ๐งฎ CLAUDE.md โ ะะฝััััะบัะธะธ ะดะปั Claude Code

## ะัะพะตะบั: ะะฐะปัะบัะปััะพัั ะพะฝะปะฐะนะฝ (ะผัะปััะธัะตะผะฐัะธัะตัะบะธะน ัะฐะนั)

> **ะขะตะบััะธะน ัะพะบัั:** ะะดะพัะพะฒัะต (25 ะบะฐะปัะบัะปััะพัะพะฒ)  
> **ะะฐััะธัะตะฝะธะต:** ะกััะพะธัะตะปัััะฒะพ, ัะธะฝะฐะฝัั, ะฐะฒัะพ (ะฟะพะทะถะต)  
> **ะฆะตะปั:** ะกะพะทะดะฐัั ัะพะฒัะตะผะตะฝะฝัะน ัะฐะนั ะบะฐะปัะบัะปััะพัะพะฒ, ะบะพัะพััะน ะพะฑะพะนะดัั beregifiguru.ru ะธ calcus.ru ะทะฐ ัััั ะดะธะทะฐะนะฝะฐ, ัะบะพัะพััะธ ะธ UX.

---

## ๐ Git-ะฒะพัะบัะปะพั (ะะะฏะะะขะะะฌะะ!)

```
ะะะะะะะ: ะะพัะปะต ะฒะฝะตะดัะตะฝะธั ะบะฐะถะดะพะน ัะธัะธ ะธะปะธ ะบะพะผะฟะพะฝะตะฝัะฐ:
1. ะัะพัะตััะธัะพะฒะฐัั (npm run build / npm run dev โ ัะฑะตะดะธัััั ััะพ ัะฐะฑะพัะฐะตั)
2. ะะฐะบะพะผะผะธัะธัั ั ะพัะผััะปะตะฝะฝัะผ ัะพะพะฑัะตะฝะธะตะผ
3. ะะฐะฟััะธัั ะฒ GitHub

ะะ ะะะะะะะะะะขะฌ ะธะทะผะตะฝะตะฝะธั! ะะฐะถะดะฐั ัะฐะฑะพัะฐั ัะธัะฐ = ะพัะดะตะปัะฝัะน ะบะพะผะผะธั + ะฟัั.

ะะตะฟะพะทะธัะพัะธะน: GitHub (ะธะฝะธัะธะฐะปะธะทะธัะพะฒะฐะฝ ะฟัะธ ััะฐััะต ะฟัะพะตะบัะฐ)
```

---

## ๐ ะะพะผะตะฝ ะธ ััััะบัััะฐ

```
ะะะะะ: ะะตะนััะฐะปัะฝัะน (mycalc.ru, calcbox.ru, vsecalc.ru)

ะกะขะะฃะะขะฃะะ URL:
/
โโโ /zdorovye/                   โ ะขะตะบััะธะน ัะพะบัั
โ   โโโ /pitanie/
โ   โ   โโโ /kalkulyator-kalorij/
โ   โ   โโโ ...
โ   โโโ /telo/
โ   โโโ /beremennost/
โ   โโโ ...
โโโ /stroitelstvo/               โ ะะพะทะถะต (ะผะตััั 12+)
โโโ /finansy/                    โ ะัั ะฟะพะทะถะต
โโโ /avto/
```

---

## ๐ฏ ะะพะฝะบััะตะฝัะฝะพะต ะฟะพะทะธัะธะพะฝะธัะพะฒะฐะฝะธะต

```
ะะะจะ ะะะะะฆะะฏ:
"ะกะฐะผัะต ะบัะฐัะธะฒัะต ะธ ะฑัััััะต ะบะฐะปัะบัะปััะพัั ะทะดะพัะพะฒัั 
 ั ะฟะพะฝััะฝัะผะธ ัะตะทัะปััะฐัะฐะผะธ โ ะฑะตะท ัะตะณะธัััะฐัะธะธ"

ะะขะกะขะะะะะ ะะข ะะะะะฃะะะะขะะ:
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโ
โ ะะพะฝะบััะตะฝั       โ ะั ัะปะฐะฑะพััั        โ ะะฐัะต ะฟัะตะธะผััะตััะฒะพ  โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโค
โ beregifiguru.ru โ ะะธะทะฐะนะฝ 2010 ะณะพะดะฐ   โ ะกะพะฒัะตะผะตะฝะฝัะน UI     โ
โ calcus.ru       โ ะะฐะปะพ ะบะพะฝัะตะฝัะฐ      โ SEO-ัะตะบััั 1500+   โ
โ fatsecret.ru    โ ะกะปะพะถะฝัะน, ะฟัะธะปะพะถะตะฝะธะตโ ะัะพััะพะน ะฒะตะฑ        โ
โ 7ya.ru          โ ะะฐะปัะบัะปััะพัั ัะฑะพะบั โ ะคะพะบัั ะฝะฐ ะฝะธั       โ
โโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะฟัะพะตะบัะฐ
npx create-next-app@latest health-calculators --typescript --tailwind --eslint --app --src-dir

cd health-calculators

# UI ะบะพะผะฟะพะฝะตะฝัั (shadcn/ui) โ ะะะะะ: ัะฝะฐัะฐะปะฐ init!
npx shadcn@latest init
npx shadcn@latest add button card input label select slider tabs badge alert form progress tooltip

# ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะทะฐะฒะธัะธะผะพััะธ
npm install react-hook-form @hookform/resolvers zod date-fns lucide-react framer-motion recharts

# ะะฟัะธะผะธะทะฐัะธั
npm install @vercel/analytics
```

### ะะพัะตะผั ััะพั ััะตะบ

| ะขะตัะฝะพะปะพะณะธั | ะะฐัะตะผ | ะัะตะธะผััะตััะฒะพ ะฝะฐะด ะบะพะฝะบััะตะฝัะฐะผะธ |
|------------|-------|------------------------------|
| Next.js 14+ (App Router) | SSG, ะฑััััะฐั ะทะฐะณััะทะบะฐ | beregifiguru ะณััะทะธััั 5+ ัะตะบ, ะผั < 2 ัะตะบ |
| TypeScript | ะะฐะดัะถะฝะพััั ะบะพะดะฐ | ะะตะฝััะต ะฑะฐะณะพะฒ |
| Tailwind CSS | ะััััะฐั ััะธะปะธะทะฐัะธั | ะะพะฝัะธััะตะฝัะฝัะน ะดะธะทะฐะนะฝ |
| shadcn/ui | ะัะฐัะธะฒัะต ะบะพะผะฟะพะฝะตะฝัั | ะกะพะฒัะตะผะตะฝะฝัะน ะฒะธะด vs ัััะฐัะตะฒัะธะน UI ะบะพะฝะบััะตะฝัะพะฒ |
| Framer Motion | ะะฝะธะผะฐัะธะธ | ะะธะฒะพะน ะธะฝัะตััะตะนั vs ััะฐัะธัะฝัะต ัััะฐะฝะธัั |
| React Hook Form + Zod | ะคะพัะผั ะธ ะฒะฐะปะธะดะฐัะธั | ะะณะฝะพะฒะตะฝะฝะฐั ะฒะฐะปะธะดะฐัะธั |
| Recharts | ะัะฐัะธะบะธ | ะะธะทัะฐะปะธะทะฐัะธั ัะตะทัะปััะฐัะพะฒ |

---

## ๐จ ะะฐัััะพะนะบะฐ shadcn/ui (ะะะะขะะงะะกะะ ะะะะะ)

### ะงัะพ ัะฐะบะพะต shadcn/ui

```
ะะะะะ ะะะะะะะขะฌ:

shadcn/ui โ ััะพ ะะ npm-ะฑะธะฑะปะธะพัะตะบะฐ, ะฐ ะะะะะะะขะะ ะบะพะผะฟะพะฝะตะฝัะพะฒ.

ะะพะณะดะฐ ัั ะดะตะปะฐะตัั: npx shadcn@latest add button
ะะฝ ัะพะทะดะฐัั ะคะะะ: /components/ui/button.tsx
ะกะพ ะะกะะะ ััะธะปัะผะธ ะธ ะฐะฝะธะผะฐัะธัะผะธ ะฒะฝัััะธ.

ะะพะผะฟะพะฝะตะฝัั ะฟัะธัะพะดัั ะะะะะะกะขะฌะฎ ััะธะปะธะทะพะฒะฐะฝะฝัะต โ 
ะบะฐะบ ะฝะฐ ะดะตะผะพ-ัะฐะนัะต ui.shadcn.com
```

### ะะพัะฐะณะพะฒะฐั ัััะฐะฝะพะฒะบะฐ

```bash
# ะจะะ 1: ะกะพะทะดะฐัั ะฟัะพะตะบั Next.js
npx create-next-app@latest my-calc --typescript --tailwind --eslint --app --src-dir
cd my-calc

# ะจะะ 2: ะะฝะธัะธะฐะปะธะทะธัะพะฒะฐัั shadcn (ะะะฏะะะขะะะฌะะ ะฟะตัะตะด ะดะพะฑะฐะฒะปะตะฝะธะตะผ ะบะพะผะฟะพะฝะตะฝัะพะฒ!)
npx shadcn@latest init
```

### ะัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั ะฟัะธ `init`

```
โ Which style would you like to use? โบ Default
โ Which color would you like to use as base color? โบ Slate (ะธะปะธ Zinc/Neutral)
โ Would you like to use CSS variables for theming? โบ yes  โ ะะะฏะะะขะะะฌะะ yes
```

### ะงัะพ ัะพะทะดะฐัััั ะฟัะธ `init`

**1. CSS ะฟะตัะตะผะตะฝะฝัะต ะฒ `app/globals.css`:**
```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    /* ... ััะผะฝะฐั ัะตะผะฐ */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
```

**2. ะะพะฝัะธะณ Tailwind (`tailwind.config.ts`):**
```typescript
import type { Config } from "tailwindcss"

const config = {
  darkMode: ["class"],
  content: [
    './pages/**/*.{ts,tsx}',
    './components/**/*.{ts,tsx}',
    './app/**/*.{ts,tsx}',
    './src/**/*.{ts,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: { height: "0" },
          to: { height: "var(--radix-accordion-content-height)" },
        },
        "accordion-up": {
          from: { height: "var(--radix-accordion-content-height)" },
          to: { height: "0" },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config

export default config
```

**3. ะฃัะธะปะธัั (`lib/utils.ts`):**
```typescript
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

**4. ะะพะฝัะธะณ ะบะพะผะฟะพะฝะตะฝัะพะฒ (`components.json`):**
```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/app/globals.css",
    "baseColor": "slate",
    "cssVariables": true
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils"
  }
}
```

### ะะพะฑะฐะฒะปะตะฝะธะต ะบะพะผะฟะพะฝะตะฝัะพะฒ

```bash
# ะะพัะปะต init ะดะพะฑะฐะฒะปัะตะผ ะฝัะถะฝัะต ะบะพะผะฟะพะฝะตะฝัั
npx shadcn@latest add button
npx shadcn@latest add card
npx shadcn@latest add slider
npx shadcn@latest add tabs
npx shadcn@latest add badge
npx shadcn@latest add progress
npx shadcn@latest add tooltip
npx shadcn@latest add alert

# ะะปะธ ะฒัะต ััะฐะทั
npx shadcn@latest add button card slider tabs badge progress tooltip alert input label select form
```

### ะัะพะฒะตัะบะฐ โ ะบะพะผะฟะพะฝะตะฝัั ะดะพะปะถะฝั ะฒัะณะปัะดะตัั ััะธะปัะฝะพ

```tsx
// app/page.tsx โ ัะตัั ััะพ ะฒัั ัะฐะฑะพัะฐะตั
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Slider } from "@/components/ui/slider"

export default function Home() {
  return (
    <main className="min-h-screen p-8 bg-background">
      <Card className="w-[400px] mx-auto">
        <CardHeader>
          <CardTitle>ะขะตัั shadcn/ui</CardTitle>
        </CardHeader>
        <CardContent className="space-y-6">
          {/* ะะฝะพะฟะบะธ ั ัะฐะทะฝัะผะธ ะฒะฐัะธะฐะฝัะฐะผะธ */}
          <div className="flex flex-wrap gap-2">
            <Button>Default</Button>
            <Button variant="secondary">Secondary</Button>
            <Button variant="destructive">Destructive</Button>
            <Button variant="outline">Outline</Button>
            <Button variant="ghost">Ghost</Button>
          </div>
          
          {/* ะกะปะฐะนะดะตั */}
          <div className="space-y-2">
            <label className="text-sm font-medium">ะกะปะฐะนะดะตั</label>
            <Slider defaultValue={[50]} max={100} step={1} />
          </div>
        </CardContent>
      </Card>
    </main>
  )
}
```

**ะัะปะธ ะฒัั ะฟัะฐะฒะธะปัะฝะพ:**
- ะะฝะพะฟะบะธ ะธะผะตัั hover-ัััะตะบัั ะธ transitions
- ะะฐััะพัะบะฐ ั ัะตะฝัั ะธ ัะบััะณะปะตะฝะธะตะผ
- ะกะปะฐะนะดะตั ะธะฝัะตัะฐะบัะธะฒะฝัะน ะธ ััะธะปัะฝัะน
- ะคะพะฝ ัััะฐะฝะธัั ะฑะตััััั ะธะท CSS-ะฟะตัะตะผะตะฝะฝะพะน

### ะงะฐัััะต ะฟัะพะฑะปะตะผั ะธ ัะตัะตะฝะธั

**ะัะพะฑะปะตะผะฐ 1: ะะพะผะฟะพะฝะตะฝัั ะฑะตะท ััะธะปะตะน (ะณะพะปัะต)**
```
ะะะะงะะะ: ะะต ะทะฐะฟัััะธะปะธ `npx shadcn@latest init` ะฟะตัะตะด ะดะพะฑะฐะฒะปะตะฝะธะตะผ ะบะพะผะฟะพะฝะตะฝัะพะฒ

ะะะจะะะะ: 
1. ะฃะดะฐะปะธัั ะฟะฐะฟะบั components/ui
2. ะะฐะฟัััะธัั npx shadcn@latest init
3. ะะฐะฝะพะฒะพ ะดะพะฑะฐะฒะธัั ะบะพะผะฟะพะฝะตะฝัั
```

**ะัะพะฑะปะตะผะฐ 2: ะกัะธะปะธ ะฝะต ะฟัะธะผะตะฝััััั**
```
ะะะะงะะะ: ะะต ะธะผะฟะพััะธัะพะฒะฐะฝ globals.css

ะะะจะะะะ: ะัะพะฒะตัะธัั app/layout.tsx
import "./globals.css"  // โ ะะพะปะถะฝะพ ะฑััั!
```

**ะัะพะฑะปะตะผะฐ 3: Tailwind ะฝะต ะฒะธะดะธั ะบะปะฐััั ะบะพะผะฟะพะฝะตะฝัะพะฒ**
```
ะะะะงะะะ: ะะตะฟัะฐะฒะธะปัะฝัะน content ะฒ tailwind.config

ะะะจะะะะ: ะัะพะฒะตัะธัั ััะพ ะตััั:
content: [
  "./components/**/*.{ts,tsx}",  // โ ะะฑัะทะฐัะตะปัะฝะพ
  "./app/**/*.{ts,tsx}",
]
```

**ะัะพะฑะปะตะผะฐ 4: ะัะธะฑะบะฐ ั cn() ะธะปะธ clsx**
```
ะะะะงะะะ: ะะต ัััะฐะฝะพะฒะปะตะฝั ะทะฐะฒะธัะธะผะพััะธ

ะะะจะะะะ:
npm install clsx tailwind-merge
```

### ะะฐััะพะผะธะทะฐัะธั ัะฒะตัะพะฒ (ะพะฟัะธะพะฝะฐะปัะฝะพ)

ะะปั ะฟัะพะตะบัะฐ ะบะฐะปัะบัะปััะพัะพะฒ ะผะพะถะฝะพ ะฝะฐัััะพะธัั ัะฒะพั ะฟะฐะปะธััั:

```css
/* app/globals.css โ ะบะฐััะพะผะฝัะต ัะฒะตัะฐ */
@layer base {
  :root {
    /* ะัะฝะพะฒะฝะพะน ัะฒะตั โ ะทะตะปัะฝัะน ะดะปั ะทะดะพัะพะฒัั */
    --primary: 142 76% 36%;           /* ะทะตะปัะฝัะน */
    --primary-foreground: 0 0% 100%;  /* ะฑะตะปัะน ัะตะบัั */
    
    /* ะะบัะตะฝัะฝัะต ัะฒะตัะฐ ะดะปั ัะตะทัะปััะฐัะพะฒ */
    --success: 142 76% 36%;           /* ะทะตะปัะฝัะน โ ะฝะพัะผะฐ */
    --warning: 38 92% 50%;            /* ะถัะปััะน โ ะฒะฝะธะผะฐะฝะธะต */
    --danger: 0 84% 60%;              /* ะบัะฐัะฝัะน โ ะพะฟะฐัะฝะพััั */
  }
}
```

### ะะฝะธะผะฐัะธะธ ั Framer Motion

shadcn ะธัะฟะพะปัะทัะตั ะฑะฐะทะพะฒัะต Tailwind-ะฐะฝะธะผะฐัะธะธ. ะะปั ะฑะพะปะตะต ัะปะพะถะฝัั โ Framer Motion:

```tsx
// ะะฝะธะผะธัะพะฒะฐะฝะฝะฐั ะบะฐััะพัะบะฐ ัะตะทัะปััะฐัะฐ
import { motion } from "framer-motion"
import { Card } from "@/components/ui/card"

export function AnimatedResultCard({ children }: { children: React.ReactNode }) {
  return (
    <motion.div
      initial={{ opacity: 0, y: 20, scale: 0.95 }}
      animate={{ opacity: 1, y: 0, scale: 1 }}
      transition={{ 
        duration: 0.3,
        ease: "easeOut"
      }}
    >
      <Card className="overflow-hidden">
        {children}
      </Card>
    </motion.div>
  )
}

// ะะฝะธะผะธัะพะฒะฐะฝะฝัะน ัััััะธะบ ัะธัะปะฐ
import { useEffect, useState } from "react"

export function AnimatedNumber({ value }: { value: number }) {
  const [display, setDisplay] = useState(0)
  
  useEffect(() => {
    const duration = 500
    const steps = 20
    const increment = value / steps
    let current = 0
    
    const timer = setInterval(() => {
      current += increment
      if (current >= value) {
        setDisplay(value)
        clearInterval(timer)
      } else {
        setDisplay(Math.round(current))
      }
    }, duration / steps)
    
    return () => clearInterval(timer)
  }, [value])
  
  return <span>{display.toLocaleString('ru-RU')}</span>
}
```

---

## ๐ ะะธะปะปะตั-ัะธัะธ ะฟัะพะตะบัะฐ

### ะฃะฝะธะบะฐะปัะฝัะต ัะธัะธ (ัะตะณะพ ะะะข ั ะบะพะฝะบััะตะฝัะพะฒ)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะคะะงะ                        โ  ะคะะะ       โ  ะะะะะะะขะะข        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโค
โ  ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป            โ  MVP        โ  ๐ด ะัะธัะธัะฝะพ      โ
โ  ะะฐัััั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ   โ  MVP        โ  ๐ด ะัะธัะธัะฝะพ      โ
โ  ะะธะทัะฐะปัะฝะฐั ัะบะฐะปะฐ ัะตะทัะปััะฐัะฐ โ  MVP        โ  ๐ด ะัะธัะธัะฝะพ      โ
โ  ะญะบัะฟะพัั ะฒ PDF               โ  MVP        โ  ๐ก ะะฐะถะฝะพ         โ
โ  ะะตะถะธะผ "ะงัะพ ะตัะปะธ"            โ  ะคะฐะทะฐ 2     โ  ๐ก ะะฐะถะฝะพ         โ
โ  ะะฐะปะตะฝะดะฐัั ะฑะตัะตะผะตะฝะฝะพััะธ      โ  ะคะฐะทะฐ 2     โ  ๐ก ะะฐะถะฝะพ         โ
โ  ะกัะฐะฒะฝะตะฝะธะต "ะขั vs ะะพัะผะฐ"     โ  ะคะฐะทะฐ 2     โ  ๐ข ะะตะปะฐัะตะปัะฝะพ    โ
โ  ะัะพัััะต ัะตะบะพะผะตะฝะดะฐัะธะธ        โ  ะคะฐะทะฐ 2     โ  ๐ก ะะฐะถะฝะพ (A/B)   โ
โ  ะะ-ะฐะฝะฐะปะธะท ัะตะทัะปััะฐัะพะฒ       โ  ะคะฐะทะฐ 3     โ  ๐ก ะะฐะถะฝะพ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโโโ
```

### ๐ค ะกััะฐัะตะณะธั ัะตะบะพะผะตะฝะดะฐัะธะน ะธ ะะ

**ะะพะดัะพะฑะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั:** [AI_RECOMMENDATIONS.md](./docs/AI_RECOMMENDATIONS.md)

```
ะะะญะขะะะะซะ ะะะะ:

ะคะฐะทะฐ 1 (MVP):     ะะตะท ัะตะบะพะผะตะฝะดะฐัะธะน โ ัะพะบัั ะฝะฐ ะฑะฐะทะพะฒัั ัะธัะฐั
                           โ
ะคะฐะทะฐ 2 (ะะตั 3-6): ะัะพัััะต ัะตะบะพะผะตะฝะดะฐัะธะธ (if/else) + A/B ัะตัั + ะพะฟัะพั
                           โ
ะคะฐะทะฐ 3 (ะะตั 7+):  ะะ ะฐะฒัะพ-ัะตะบะพะผะตะฝะดะฐัะธะธ (ัะพะปัะบะพ ะตัะปะธ A/B ััะฟะตัะตะฝ!)
```

**ะัะธัะตัะธะธ ะฟะตัะตัะพะดะฐ ะบ ะะ:**
- ะัะตะผั ะฝะฐ ัััะฐะฝะธัะต ะฒััะพัะปะพ ะฝะฐ 20%+
- ะัะบะฐะทั ัะฝะธะทะธะปะธัั ะฝะฐ 10%+
- ะ ะพะฟัะพัะต 60%+ ะพัะฒะตัะธะปะธ "ะดะฐ, ัะพัั ัะตะบะพะผะตะฝะดะฐัะธะธ"
- ะะธะฝะธะผัะผ 1000 ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฝะฐ ะบะฐะถะดัะน ะฒะฐัะธะฐะฝั A/B ัะตััะฐ

**ะกัะพะธะผะพััั ะะ (GPT-4o-mini + ะบััะธัะพะฒะฐะฝะธะต):**
- ะัะธ 5,000 ะฟะพะปัะทะพะฒะฐัะตะปะตะน/ะดะตะฝั: ~100 โฝ/ะผะตั
- ะะปะฐะณะพะดะฐัั ะบััะธัะพะฒะฐะฝะธั 90%+ ะทะฐะฟัะพัะพะฒ โ ะฟะพััะธ ะฑะตัะฟะปะฐัะฝะพ

---

## ๐ง ะกะธััะตะผะฐ ัะตะบะพะผะตะฝะดะฐัะธะน (ะฟะพััะฐะฟะฝะพะต ะฒะฝะตะดัะตะฝะธะต)

### ะะฑะทะพั ัััะฐัะตะณะธะธ

```
ะะะญะขะะะะซะ ะะะะ:

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะคะะะ 1 (MVP): ะะตะท ัะตะบะพะผะตะฝะดะฐัะธะน                                โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โข ะขะพะปัะบะพ ะบะฐะปัะบัะปััะพัั ั ะฑะฐะทะพะฒัะผะธ ะบะธะปะปะตั-ัะธัะฐะผะธ               โ
โ  โข ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป, ะฒะธะทัะฐะปัะฝัะต ัะบะฐะปั, PDF                    โ
โ  โข ะะฐะฑะธัะฐะตะผ ััะฐัะธะบ ะธ ะฐัะดะธัะพัะธั                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะคะะะ 2: ะัะพัััะต ัะตะบะพะผะตะฝะดะฐัะธะธ + A/B ัะตััั                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โข ะะฐัะฐะฝะตะต ะฝะฐะฟะธัะฐะฝะฝัะต ัะตะบััั ะฟะพ ััะปะพะฒะธัะผ (if/else)            โ
โ  โข A/B ัะตัั: ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ vs ะฑะตะท                          โ
โ  โข ะะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน: "ะฅะพัะตะปะธ ะฑั ะะ-ะฟะพะผะพัะฝะธะบะฐ?"             โ
โ  โข ะะฝะฐะปะธะท ะผะตััะธะบ (ะฒัะตะผั ะฝะฐ ัััะฐะฝะธัะต, ะฒะพะทะฒัะฐัั)                โ
โ  โข ะกัะพะธะผะพััั: 0 โฝ                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะคะะะ 3: ะะ-ะฐะฝะฐะปะธะท (ะตัะปะธ A/B ััะฟะตัะตะฝ)                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โข ะะตััะพะฝะฐะปัะฝัะน ะฐะฝะฐะปะธะท ะฝะฐ ะพัะฝะพะฒะต ัะตะทัะปััะฐัะพะฒ ะบะฐะปัะบัะปััะพัะฐ     โ
โ  โข ะะะ ัะฐัะฐ โ ัะพะปัะบะพ ะฐะฒัะพ-ะณะตะฝะตัะฐัะธั ะฟะพ ะดะฐะฝะฝัะผ                 โ
โ  โข ะััะธัะพะฒะฐะฝะธะต 90%+ ะทะฐะฟัะพัะพะฒ                                   โ
โ  โข ะกัะพะธะผะพััั: 100-500 โฝ/ะผะตั ะฟัะธ ะฑะพะปััะพะผ ััะฐัะธะบะต               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### ะคะฐะทะฐ 2: ะัะพัััะต ัะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ััะปะพะฒะธัะผ

**ะัะธะฝัะธะฟ:** ะะฐัะฐะฝะตะต ะฝะฐะฟะธัะฐะฝะฝัะต ัะตะบััั, ะบะพัะพััะต ะฟะพะบะฐะทัะฒะฐัััั ะฟะพ ััะปะพะฒะธัะผ ะฝะฐ ะพัะฝะพะฒะต ัะตะทัะปััะฐัะพะฒ ะบะฐะปัะบัะปััะพัะฐ. ะะตะท API, ะฑะตะท ัะฐััะพะดะพะฒ.

```typescript
// lib/recommendations/calories.ts

interface CalorieData {
  gender: 'male' | 'female'
  age: number
  weight: number
  height: number
  bmi: number
  activity: string
  goal: 'lose' | 'maintain' | 'gain'
  tdee: number
  targetCalories: number
  deficit?: number
}

interface Recommendation {
  icon: string
  title: string
  text: string
  type: 'info' | 'warning' | 'success' | 'tip'
}

export function getCalorieRecommendations(data: CalorieData): Recommendation[] {
  const recommendations: Recommendation[] = []
  
  // --- ะะะะะะะะะะฆะะ ะะ ะะะข ---
  
  if (data.bmi < 18.5) {
    recommendations.push({
      icon: 'โ๏ธ',
      title: 'ะะตะดะพััะฐัะพัะฝัะน ะฒะตั',
      text: `ะะฐั ะะะข ${data.bmi.toFixed(1)} ัะบะฐะทัะฒะฐะตั ะฝะฐ ะดะตัะธัะธั ะผะฐััั ัะตะปะฐ. ะะตะบะพะผะตะฝะดัะตะผ ัะฒะตะปะธัะธัั ะบะฐะปะพัะธะนะฝะพััั ะฝะฐ 300-500 ะบะบะฐะป ะฒััะต ะฝะพัะผั ะธ ะดะพะฑะฐะฒะธัั ัะธะปะพะฒัะต ััะตะฝะธัะพะฒะบะธ ะดะปั ะฝะฐะฑะพัะฐ ะผััะตัะฝะพะน ะผะฐััั.`,
      type: 'warning'
    })
  }
  
  if (data.bmi >= 25 && data.bmi < 30) {
    recommendations.push({
      icon: '๐',
      title: 'ะะทะฑััะพัะฝัะน ะฒะตั',
      text: `ะะฐั ะะะข ${data.bmi.toFixed(1)} โ ััะพ ะฝะฐัะฐะปะพ ะธะทะฑััะพัะฝะพะณะพ ะฒะตัะฐ. ะฅะพัะพัะฐั ะฝะพะฒะพััั: ะดะปั ะฒะพะทะฒัะฐัะฐ ะฒ ะฝะพัะผั ะดะพััะฐัะพัะฝะพ ัะฑัะพัะธัั ${(data.weight - (data.height/100)**2 * 24.9).toFixed(0)} ะบะณ. ะัะธ ะดะตัะธัะธัะต 300-500 ะบะบะฐะป ััะพ ะทะฐะนะผัั ${Math.ceil((data.weight - (data.height/100)**2 * 24.9) / 0.5)} ะฝะตะดะตะปั.`,
      type: 'info'
    })
  }
  
  if (data.bmi >= 30) {
    recommendations.push({
      icon: 'โ๏ธ',
      title: 'ะะถะธัะตะฝะธะต',
      text: 'ะัะธ ะะะข ะฒััะต 30 ัะตะบะพะผะตะฝะดัะตะผ ะฟัะพะบะพะฝััะปััะธัะพะฒะฐัััั ั ะฒัะฐัะพะผ ะฟะตัะตะด ะฝะฐัะฐะปะพะผ ะดะธะตัั. ะะตะทะพะฟะฐัะฝัะน ัะตะผะฟ ัะฝะธะถะตะฝะธั ะฒะตัะฐ โ ะฝะต ะฑะพะปะตะต 0.5-1 ะบะณ ะฒ ะฝะตะดะตะปั.',
      type: 'warning'
    })
  }
  
  // --- ะะะะะะะะะะฆะะ ะะ ะะะะะะกะขะฃ ---
  
  if (data.age >= 30 && data.age < 40) {
    recommendations.push({
      icon: 'โก',
      title: 'ะัะพะฑะตะฝะฝะพััั ะฒะพะทัะฐััะฐ',
      text: 'ะะพัะปะต 30 ะปะตั ะผะตัะฐะฑะพะปะธะทะผ ะทะฐะผะตะดะปัะตััั ะฝะฐ 3-5% ะบะฐะถะดัะต 10 ะปะตั. ะงัะพะฑั ะบะพะผะฟะตะฝัะธัะพะฒะฐัั ััะพ, ะฒะฐะถะฝะพ ัะพััะฐะฝััั ะผััะตัะฝัั ะผะฐััั โ ะดะพะฑะฐะฒััะต ัะธะปะพะฒัะต ัะฟัะฐะถะฝะตะฝะธั 2-3 ัะฐะทะฐ ะฒ ะฝะตะดะตะปั.',
      type: 'info'
    })
  }
  
  if (data.age >= 40 && data.age < 50) {
    recommendations.push({
      icon: 'โก',
      title: 'ะัะพะฑะตะฝะฝะพััั ะฒะพะทัะฐััะฐ',
      text: 'ะะพัะปะต 40 ะปะตั ะพัะณะฐะฝะธะทะผ ัะตััะตั ~1% ะผััะตัะฝะพะน ะผะฐััั ะฒ ะณะพะด ะฑะตะท ััะตะฝะธัะพะฒะพะบ. ะะตะปะพะบ ััะฐะฝะพะฒะธััั ะบัะธัะธัะตัะบะธ ะฒะฐะถะตะฝ โ ััะฐัะฐะนัะตัั ะฟะพะปััะฐัั ะผะธะฝะธะผัะผ 1.2ะณ ะฝะฐ ะบะณ ะฒะตัะฐ.',
      type: 'info'
    })
  }
  
  if (data.age >= 50) {
    recommendations.push({
      icon: 'โก',
      title: 'ะัะพะฑะตะฝะฝะพััั ะฒะพะทัะฐััะฐ',
      text: 'ะะพัะปะต 50 ะปะตั ะฝะต ัะตะบะพะผะตะฝะดัะตััั ัะตะทะบะพะต ัะฝะธะถะตะฝะธะต ะบะฐะปะพัะธะน โ ััะพ ะผะพะถะตั ะฟัะธะฒะตััะธ ะบ ะฟะพัะตัะต ะผััั ะธ ะบะพััะฝะพะน ะผะฐััั. ะะฟัะธะผะฐะปัะฝัะน ะดะตัะธัะธั โ ะฝะต ะฑะพะปะตะต 300 ะบะบะฐะป.',
      type: 'warning'
    })
  }
  
  // --- ะะะะะะะะะะฆะะ ะะ ะะะขะะะะะกะขะ ---
  
  if (data.activity === 'sedentary' && data.goal === 'lose') {
    recommendations.push({
      icon: '๐ถ',
      title: 'ะะพะฑะฐะฒััะต ะดะฒะธะถะตะฝะธะต',
      text: 'ะัะธ ัะธะดััะตะผ ะพะฑัะฐะทะต ะถะธะทะฝะธ ะฟัะพััะพะต ะดะพะฑะฐะฒะปะตะฝะธะต 30 ะผะธะฝัั ัะพะดัะฑั ะฒ ะดะตะฝั ัะฒะตะปะธัะธั ัะฐััะพะด ะฝะฐ 150-200 ะบะบะฐะป. ะญัะพ ะฟะพะทะฒะพะปะธั ะตััั ะฑะพะปััะต ะธะปะธ ััะดะตัั ะฑััััะตะต.',
      type: 'tip'
    })
  }
  
  if (data.activity === 'very_active' || data.activity === 'extra_active') {
    recommendations.push({
      icon: '๐ช',
      title: 'ะััะพะบะฐั ะฐะบัะธะฒะฝะพััั',
      text: 'ะัะธ ะฒะฐัะตะผ ััะพะฒะฝะต ะฐะบัะธะฒะฝะพััะธ ะบัะธัะธัะตัะบะธ ะฒะฐะถะฝะพ ะฟะพะปััะฐัั ะดะพััะฐัะพัะฝะพ ะฑะตะปะบะฐ (1.6-2ะณ ะฝะฐ ะบะณ ะฒะตัะฐ) ะธ ะฝะต ััะพะดะธัั ะฒ ัะธะปัะฝัะน ะดะตัะธัะธั โ ััะพ ัะฝะธะทะธั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ะธ ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต.',
      type: 'tip'
    })
  }
  
  // --- ะะะะะะะะะะฆะะ ะะ ะฆะะะ ---
  
  if (data.goal === 'lose' && data.deficit && data.deficit > 700) {
    recommendations.push({
      icon: 'โ๏ธ',
      title: 'ะกะปะธัะบะพะผ ะฑะพะปััะพะน ะดะตัะธัะธั',
      text: `ะะตัะธัะธั ${data.deficit} ะบะบะฐะป ะฐะณัะตััะธะฒะตะฝ ะธ ะผะพะถะตั ะฟัะธะฒะตััะธ ะบ ะฟะพัะตัะต ะผััั, ะทะฐะผะตะดะปะตะฝะธั ะผะตัะฐะฑะพะปะธะทะผะฐ ะธ ัััะฒะฐะผ. ะะตะบะพะผะตะฝะดัะตะผ ะดะตัะธัะธั 300-500 ะบะบะฐะป ะดะปั ัััะพะนัะธะฒะพะณะพ ัะตะทัะปััะฐัะฐ.`,
      type: 'warning'
    })
  }
  
  if (data.goal === 'lose' && data.targetCalories < 1200 && data.gender === 'female') {
    recommendations.push({
      icon: '๐จ',
      title: 'ะกะปะธัะบะพะผ ะฝะธะทะบะฐั ะบะฐะปะพัะธะนะฝะพััั',
      text: 'ะะฐะปะพัะธะนะฝะพััั ะฝะธะถะต 1200 ะบะบะฐะป ะดะปั ะถะตะฝัะธะฝ ะพะฟะฐัะฝะฐ ะฑะตะท ะฝะฐะฑะปัะดะตะฝะธั ะฒัะฐัะฐ. ะญัะพ ะผะพะถะตั ะฟัะธะฒะตััะธ ะบ ะดะตัะธัะธัั ะฟะธัะฐัะตะปัะฝัั ะฒะตัะตััะฒ ะธ ะณะพัะผะพะฝะฐะปัะฝัะผ ะฝะฐัััะตะฝะธัะผ.',
      type: 'warning'
    })
  }
  
  if (data.goal === 'lose' && data.targetCalories < 1500 && data.gender === 'male') {
    recommendations.push({
      icon: '๐จ',
      title: 'ะกะปะธัะบะพะผ ะฝะธะทะบะฐั ะบะฐะปะพัะธะนะฝะพััั',
      text: 'ะะฐะปะพัะธะนะฝะพััั ะฝะธะถะต 1500 ะบะบะฐะป ะดะปั ะผัะถัะธะฝ ะฝะต ัะตะบะพะผะตะฝะดัะตััั ะฑะตะท ะฝะฐะฑะปัะดะตะฝะธั ะฒัะฐัะฐ. ะญัะพ ะผะพะถะตั ะฟัะธะฒะตััะธ ะบ ะฟะพัะตัะต ะผััั ะธ ะทะฐะผะตะดะปะตะฝะธั ะผะตัะฐะฑะพะปะธะทะผะฐ.',
      type: 'warning'
    })
  }
  
  if (data.goal === 'gain') {
    recommendations.push({
      icon: '๐ฝ๏ธ',
      title: 'ะะปั ะฝะฐะฑะพัะฐ ะผะฐััั',
      text: `ะัะพัะธัะธั 300-500 ะบะบะฐะป ะพะฟัะธะผะฐะปะตะฝ ะดะปั ะฝะฐะฑะพัะฐ ะผััะตัะฝะพะน ะผะฐััั ะฑะตะท ะปะธัะฝะตะณะพ ะถะธัะฐ. ะัะธ ${data.targetCalories} ะบะบะฐะป ััะฐัะฐะนัะตัั ะฟะพะปััะฐัั ${Math.round(data.weight * 1.6)}-${Math.round(data.weight * 2)}ะณ ะฑะตะปะบะฐ ะฒ ะดะตะฝั.`,
      type: 'tip'
    })
  }
  
  // --- ะะะะะะะะะะฆะะ ะะ ะะะะะฃ ---
  
  const minProtein = data.goal === 'lose' 
    ? Math.round(data.weight * 1.6) 
    : Math.round(data.weight * 1.2)
  
  recommendations.push({
    icon: '๐ฅฉ',
    title: 'ะะพัะผะฐ ะฑะตะปะบะฐ',
    text: `ะัะธ ะฒะฐัะตะน ัะตะปะธ (${data.goal === 'lose' ? 'ะฟะพััะดะตะฝะธะต' : data.goal === 'gain' ? 'ะฝะฐะฑะพั ะผะฐััั' : 'ะฟะพะดะดะตัะถะฐะฝะธะต'}) ัะตะบะพะผะตะฝะดัะตะผ ะผะธะฝะธะผัะผ ${minProtein}ะณ ะฑะตะปะบะฐ ะฒ ะดะตะฝั. ะญัะพ ะฟัะธะผะตัะฝะพ ${Math.round(minProtein / 25)} ะฟะพััะธะน ะผััะฐ/ััะฑั/ัะฒะพัะพะณะฐ.`,
    type: 'info'
  })
  
  return recommendations
}
```

**ะะตะบะพะผะตะฝะดะฐัะธะธ ะดะปั ะดััะณะธั ะบะฐะปัะบัะปััะพัะพะฒ:**

```typescript
// lib/recommendations/bmi.ts

export function getBMIRecommendations(data: BMIData): Recommendation[] {
  const recommendations: Recommendation[] = []
  
  // ะะดะตะฐะปัะฝัะน ะฒะตั
  const idealMin = Math.round((data.height / 100) ** 2 * 18.5)
  const idealMax = Math.round((data.height / 100) ** 2 * 24.9)
  
  recommendations.push({
    icon: '๐ฏ',
    title: 'ะะฐั ะธะดะตะฐะปัะฝัะน ะดะธะฐะฟะฐะทะพะฝ',
    text: `ะะปั ัะพััะฐ ${data.height} ัะผ ะทะดะพัะพะฒัะน ะฒะตั: ${idealMin}-${idealMax} ะบะณ. ${
      data.weight > idealMax 
        ? `ะะปั ะดะพััะธะถะตะฝะธั ะฒะตััะฝะตะน ะณัะฐะฝะธัั ะฝัะถะฝะพ ัะฑัะพัะธัั ${data.weight - idealMax} ะบะณ.`
        : data.weight < idealMin
        ? `ะะปั ะดะพััะธะถะตะฝะธั ะฝะธะถะฝะตะน ะณัะฐะฝะธัั ะฝัะถะฝะพ ะฝะฐะฑัะฐัั ${idealMin - data.weight} ะบะณ.`
        : 'ะั ะฒ ะธะดะตะฐะปัะฝะพะผ ะดะธะฐะฟะฐะทะพะฝะต!'
    }`,
    type: data.weight >= idealMin && data.weight <= idealMax ? 'success' : 'info'
  })
  
  // ะะณัะฐะฝะธัะตะฝะธั ะะะข
  recommendations.push({
    icon: '๐ก',
    title: 'ะะฐะถะฝะพ ะฟะพะฝะธะผะฐัั',
    text: 'ะะะข ะฝะต ััะธััะฒะฐะตั ะผััะตัะฝัั ะผะฐััั, ะฒะพะทัะฐัั ะธ ัะฐัะฟัะตะดะตะปะตะฝะธะต ะถะธัะฐ. ะัะปะธ ะฒั ััะตะฝะธััะตัะตัั, ะพัะธะตะฝัะธััะนัะตัั ัะฐะบะถะต ะฝะฐ ะพะฑัะฒะฐั ัะฐะปะธะธ ะธ ะฟัะพัะตะฝั ะถะธัะฐ.',
    type: 'info'
  })
  
  // ะะฑัะฒะฐั ัะฐะปะธะธ
  if (data.gender === 'male') {
    recommendations.push({
      icon: '๐',
      title: 'ะะฑัะฒะฐั ัะฐะปะธะธ',
      text: 'ะะปั ะผัะถัะธะฝ ะทะดะพัะพะฒัะน ะพะฑัะฒะฐั ัะฐะปะธะธ โ ะดะพ 94 ัะผ. ะััะต 102 ัะผ โ ะฟะพะฒััะตะฝะฝัะน ัะธัะบ ัะตัะดะตัะฝะพ-ัะพััะดะธัััั ะทะฐะฑะพะปะตะฒะฐะฝะธะน.',
      type: 'tip'
    })
  } else {
    recommendations.push({
      icon: '๐',
      title: 'ะะฑัะฒะฐั ัะฐะปะธะธ',
      text: 'ะะปั ะถะตะฝัะธะฝ ะทะดะพัะพะฒัะน ะพะฑัะฒะฐั ัะฐะปะธะธ โ ะดะพ 80 ัะผ. ะััะต 88 ัะผ โ ะฟะพะฒััะตะฝะฝัะน ัะธัะบ ัะตัะดะตัะฝะพ-ัะพััะดะธัััั ะทะฐะฑะพะปะตะฒะฐะฝะธะน.',
      type: 'tip'
    })
  }
  
  return recommendations
}

// lib/recommendations/pregnancy.ts

export function getPregnancyRecommendations(data: PregnancyData): Recommendation[] {
  const recommendations: Recommendation[] = []
  const week = data.currentWeek
  
  // ะะพ ััะธะผะตัััะฐะผ
  if (week <= 12) {
    recommendations.push({
      icon: '๐ฑ',
      title: 'ะะตัะฒัะน ััะธะผะตััั',
      text: 'ะกะตะนัะฐั ัะพัะผะธัััััั ะฒัะต ะพัะณะฐะฝั ะผะฐะปััะฐ. ะะฐะถะฝะพ: ัะพะปะธะตะฒะฐั ะบะธัะปะพัะฐ 400 ะผะบะณ/ะดะตะฝั, ะพัะบะฐะท ะพั ะฐะปะบะพะณะพะปั, ะพะณัะฐะฝะธัะตะฝะธะต ะบะพัะตะธะฝะฐ ะดะพ 200 ะผะณ/ะดะตะฝั.',
      type: 'info'
    })
  } else if (week <= 27) {
    recommendations.push({
      icon: '๐ธ',
      title: 'ะัะพัะพะน ััะธะผะตััั',
      text: 'ะกะฐะผัะน ะบะพะผัะพััะฝัะน ะฟะตัะธะพะด! ะะฐะปัั ะฐะบัะธะฒะฝะพ ัะฐัััั. ะะพะฑะฐะฒััะต ะฒ ัะฐัะธะพะฝ ะฟัะพะดัะบัั ั ะถะตะปะตะทะพะผ ะธ ะบะฐะปััะธะตะผ. ะะพัะผะฐ ะฝะฐะฑะพัะฐ ะฒะตัะฐ: 0.5 ะบะณ ะฒ ะฝะตะดะตะปั.',
      type: 'info'
    })
  } else {
    recommendations.push({
      icon: '๐ผ',
      title: 'ะขัะตัะธะน ััะธะผะตััั',
      text: 'ะคะธะฝะธัะฝะฐั ะฟััะผะฐั! ะะฐะปัั ะฝะฐะฑะธัะฐะตั ะฒะตั. ะะทะฑะตะณะฐะนัะต ะฟะตัะตะตะดะฐะฝะธั โ ััะพ ััะปะพะถะฝะธั ัะพะดั. ะะพะดะณะพัะพะฒััะต ััะผะบั ะฒ ัะพะดะดะพะผ ะบ 36 ะฝะตะดะตะปะต.',
      type: 'info'
    })
  }
  
  // ะะพะฝะบัะตัะฝัะต ะฝะตะดะตะปะธ
  if (week === 12 || week === 11 || week === 13) {
    recommendations.push({
      icon: '๐ฅ',
      title: 'ะัะตะผั ะฟะตัะฒะพะณะพ ัะบัะธะฝะธะฝะณะฐ',
      text: 'ะะฐ 11-13 ะฝะตะดะตะปะต ะฟัะพะฒะพะดะธััั ะฟะตัะฒัะน ัะบัะธะฝะธะฝะณ: ะฃะะ + ะฐะฝะฐะปะธะท ะบัะพะฒะธ. ะญัะพ ะฒะฐะถะฝะพ ะดะปั ะพัะตะฝะบะธ ัะธัะบะพะฒ ััะพะผะพัะพะผะฝัั ะฐะฝะพะผะฐะปะธะน.',
      type: 'warning'
    })
  }
  
  if (week === 20 || week === 19 || week === 21) {
    recommendations.push({
      icon: '๐ฅ',
      title: 'ะัะตะผั ะฒัะพัะพะณะพ ัะบัะธะฝะธะฝะณะฐ',
      text: 'ะะฐ 18-21 ะฝะตะดะตะปะต ะฟัะพะฒะพะดะธััั ะฒัะพัะพะน ัะบัะธะฝะธะฝะณ. ะะฐ ะฃะะ ะผะพะถะฝะพ ัะทะฝะฐัั ะฟะพะป ะผะฐะปััะฐ ะธ ะฟัะพะฒะตัะธัั ัะฐะทะฒะธัะธะต ะฒัะตั ะพัะณะฐะฝะพะฒ.',
      type: 'warning'
    })
  }
  
  if (week >= 30 && week <= 32) {
    recommendations.push({
      icon: '๐',
      title: 'ะะตะบัะตัะฝัะน ะพัะฟััะบ',
      text: 'ะก 30 ะฝะตะดะตะปะธ ะฒั ะผะพะถะตัะต ะพัะพัะผะธัั ะดะตะบัะตัะฝัะน ะพัะฟััะบ. ะะพะดะณะพัะพะฒััะต ะดะพะบัะผะตะฝัั ะทะฐัะฐะฝะตะต.',
      type: 'tip'
    })
  }
  
  return recommendations
}
```

**UI ะบะพะผะฟะพะฝะตะฝั ะดะปั ะฟัะพัััั ัะตะบะพะผะตะฝะดะฐัะธะน:**

```tsx
// components/features/SimpleRecommendations.tsx
"use client"

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Lightbulb } from "lucide-react"

interface Recommendation {
  icon: string
  title: string
  text: string
  type: 'info' | 'warning' | 'success' | 'tip'
}

interface SimpleRecommendationsProps {
  recommendations: Recommendation[]
}

export function SimpleRecommendations({ recommendations }: SimpleRecommendationsProps) {
  if (recommendations.length === 0) return null
  
  const getBgColor = (type: Recommendation['type']) => {
    switch (type) {
      case 'warning': return 'bg-orange-50 border-orange-200'
      case 'success': return 'bg-green-50 border-green-200'
      case 'tip': return 'bg-blue-50 border-blue-200'
      default: return 'bg-muted/50 border-border'
    }
  }
  
  return (
    <Card>
      <CardHeader className="pb-3">
        <CardTitle className="flex items-center gap-2 text-lg">
          <Lightbulb className="w-5 h-5 text-primary" />
          ะะตะบะพะผะตะฝะดะฐัะธะธ
        </CardTitle>
      </CardHeader>
      <CardContent className="space-y-3">
        {recommendations.map((rec, index) => (
          <div 
            key={index}
            className={`p-3 rounded-lg border ${getBgColor(rec.type)}`}
          >
            <div className="flex gap-2">
              <span className="text-lg flex-shrink-0">{rec.icon}</span>
              <div>
                <h4 className="font-medium text-sm mb-1">{rec.title}</h4>
                <p className="text-sm text-muted-foreground">{rec.text}</p>
              </div>
            </div>
          </div>
        ))}
      </CardContent>
    </Card>
  )
}

// ะัะฟะพะปัะทะพะฒะฐะฝะธะต:
import { getCalorieRecommendations } from '@/lib/recommendations/calories'

const recommendations = getCalorieRecommendations({
  gender: 'male',
  age: 35,
  weight: 82,
  height: 178,
  bmi: 25.9,
  activity: 'sedentary',
  goal: 'lose',
  tdee: 2136,
  targetCalories: 1815,
  deficit: 321,
})

<SimpleRecommendations recommendations={recommendations} />
```

---

### A/B ัะตััะธัะพะฒะฐะฝะธะต ัะตะบะพะผะตะฝะดะฐัะธะน

```typescript
// lib/ab-testing/recommendations.ts

// ะะฟัะตะดะตะปัะตะผ ะณััะฟะฟั ะฟะพะปัะทะพะฒะฐัะตะปั
export function getABGroup(userId: string): 'control' | 'test' {
  // ะัะพััะพะน ะดะตัะตัะผะธะฝะธัะพะฒะฐะฝะฝัะน ัะตั ะดะปั ะบะพะฝัะธััะตะฝัะฝะพััะธ
  const hash = userId.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)
  return hash % 2 === 0 ? 'control' : 'test'
}

// ะฅัะบ ะดะปั A/B ัะตััะฐ
export function useABTest(testName: string) {
  const [group, setGroup] = useState<'control' | 'test'>('control')
  
  useEffect(() => {
    // ะะพะปััะฐะตะผ ะธะปะธ ัะพะทะดะฐัะผ userId
    let userId = localStorage.getItem('ab_user_id')
    if (!userId) {
      userId = crypto.randomUUID()
      localStorage.setItem('ab_user_id', userId)
    }
    
    setGroup(getABGroup(userId))
    
    // ะัะฟัะฐะฒะปัะตะผ ะฒ ะฐะฝะฐะปะธัะธะบั
    trackEvent('ab_test_assigned', { testName, group })
  }, [testName])
  
  return group
}

// ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒ ะบะพะผะฟะพะฝะตะฝัะต ะบะฐะปัะบัะปััะพัะฐ:
function CalorieCalculator() {
  const abGroup = useABTest('recommendations_v1')
  const [result, setResult] = useState(null)
  
  // ... ะปะพะณะธะบะฐ ะบะฐะปัะบัะปััะพัะฐ ...
  
  return (
    <div>
      <ResultCard result={result} />
      
      {/* ะะพะบะฐะทัะฒะฐะตะผ ัะตะบะพะผะตะฝะดะฐัะธะธ ัะพะปัะบะพ ะณััะฟะฟะต test */}
      {abGroup === 'test' && result && (
        <SimpleRecommendations 
          recommendations={getCalorieRecommendations(result)} 
        />
      )}
    </div>
  )
}
```

**ะะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน:**

```tsx
// components/features/FeatureSurvey.tsx
"use client"

import { useState } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { MessageSquare, X } from "lucide-react"

export function FeatureSurvey() {
  const [isVisible, setIsVisible] = useState(true)
  const [answered, setAnswered] = useState(false)
  
  // ะะพะบะฐะทัะฒะฐะตะผ ัะพะปัะบะพ ะตัะปะธ ะฝะต ะพัะฒะตัะฐะปะธ ัะฐะฝะตะต
  useEffect(() => {
    if (localStorage.getItem('survey_ai_answered')) {
      setIsVisible(false)
    }
  }, [])
  
  const handleAnswer = (answer: 'yes' | 'no' | 'maybe') => {
    // ะัะฟัะฐะฒะปัะตะผ ะฒ ะฐะฝะฐะปะธัะธะบั
    trackEvent('survey_ai_assistant', { answer })
    localStorage.setItem('survey_ai_answered', 'true')
    setAnswered(true)
    
    setTimeout(() => setIsVisible(false), 2000)
  }
  
  if (!isVisible) return null
  
  return (
    <Card className="border-primary/20">
      <CardHeader className="pb-2">
        <CardTitle className="flex items-center justify-between text-base">
          <span className="flex items-center gap-2">
            <MessageSquare className="w-4 h-4" />
            ะะพะผะพะณะธัะต ะฝะฐะผ ััะฐัั ะปัััะต
          </span>
          <Button 
            variant="ghost" 
            size="sm" 
            className="h-6 w-6 p-0"
            onClick={() => setIsVisible(false)}
          >
            <X className="w-4 h-4" />
          </Button>
        </CardTitle>
      </CardHeader>
      <CardContent>
        {answered ? (
          <p className="text-sm text-muted-foreground">ะกะฟะฐัะธะฑะพ ะทะฐ ะพัะฒะตั! ๐</p>
        ) : (
          <>
            <p className="text-sm mb-3">
              ะฅะพัะตะปะธ ะฑั ะฒั ะฟะพะปััะฐัั ะฟะตััะพะฝะฐะปัะฝัะต ัะตะบะพะผะตะฝะดะฐัะธะธ ะพั ะะ-ะฟะพะผะพัะฝะธะบะฐ 
              ะฝะฐ ะพัะฝะพะฒะต ะฒะฐัะธั ัะตะทัะปััะฐัะพะฒ?
            </p>
            <div className="flex gap-2">
              <Button size="sm" onClick={() => handleAnswer('yes')}>
                ะะฐ, ะธะฝัะตัะตัะฝะพ
              </Button>
              <Button size="sm" variant="outline" onClick={() => handleAnswer('maybe')}>
                ะะพะทะผะพะถะฝะพ
              </Button>
              <Button size="sm" variant="ghost" onClick={() => handleAnswer('no')}>
                ะะตั
              </Button>
            </div>
          </>
        )}
      </CardContent>
    </Card>
  )
}
```

---

### ะคะฐะทะฐ 3: ะะ-ะฐะฝะฐะปะธะท ัะตะทัะปััะฐัะพะฒ

**ะฃัะปะพะฒะธะต ะทะฐะฟััะบะฐ:** A/B ัะตัั ะฟะพะบะฐะทะฐะป ัะปัััะตะฝะธะต ะผะตััะธะบ + >50% ะฟะพะปะพะถะธัะตะปัะฝัั ะพัะฒะตัะพะฒ ะฒ ะพะฟัะพัะต.

**ะัะธะฝัะธะฟ:** ะะฒัะพะผะฐัะธัะตัะบะฐั ะณะตะฝะตัะฐัะธั ะฟะตััะพะฝะฐะปัะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ ะฝะฐ ะพัะฝะพะฒะต ัะตะทัะปััะฐัะพะฒ ะบะฐะปัะบัะปััะพัะฐ. ะะะ ัะฐัะฐ โ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะธัะตะณะพ ะฝะต ะฒะฒะพะดะธั.

```
ะกะฅะะะ ะะะะะขะซ:

[ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะฟะพะปะฝัะตั ะบะฐะปัะบัะปััะพั]
              โ
[ะะตะทัะปััะฐั: ัะธััั + ัะบะฐะปะฐ]
              โ
[ะะฝะพะฟะบะฐ "๐ค ะะพะบะฐะทะฐัั ะะ-ะฐะฝะฐะปะธะท"]
              โ
[ะะตะฝะตัะธััะตะผ ะฟัะพะผั ะธะท ะดะฐะฝะฝัั ะบะฐะปัะบัะปััะพัะฐ]
              โ
[ะัะพะฒะตััะตะผ ะบัั โ ะตัะปะธ ะฝะตั, ะทะฐะฟัะพั ะบ API]
              โ
[ะะพะบะฐะทัะฒะฐะตะผ ะฟะตััะพะฝะฐะปัะฝัะน ัะตะบัั]
```

**ะัะพะผัั ะดะปั ะะ:**

```typescript
// lib/ai/prompts.ts

export const AI_PROMPTS = {
  
  calories: (data: CalorieData) => `ะขั โ ัะบัะฟะตัั ะฟะพ ะฟะธัะฐะฝะธั. ะะฐะน ะฟะตััะพะฝะฐะปัะฝัะน ะฐะฝะฐะปะธะท ัะตะทัะปััะฐัะพะฒ ะบะฐะปัะบัะปััะพัะฐ ะบะฐะปะพัะธะน.

ะะะะะซะ ะะะะฌะะะะะขะะะฏ:
- ะะพะป: ${data.gender === 'male' ? 'ะผัะถัะธะฝะฐ' : 'ะถะตะฝัะธะฝะฐ'}
- ะะพะทัะฐัั: ${data.age} ะปะตั
- ะะพัั: ${data.height} ัะผ
- ะะตั: ${data.weight} ะบะณ
- ะฃัะพะฒะตะฝั ะฐะบัะธะฒะฝะพััะธ: ${data.activity}
- ะฆะตะปั: ${data.goal === 'lose' ? 'ะฟะพััะดะตะฝะธะต' : data.goal === 'gain' ? 'ะฝะฐะฑะพั ะผะฐััั' : 'ะฟะพะดะดะตัะถะฐะฝะธะต'}

ะะะกะกะงะะขะะะะซะ ะะะะะะะขะะะ:
- ะะฐะทะพะฒัะน ะผะตัะฐะฑะพะปะธะทะผ (BMR): ${data.bmr} ะบะบะฐะป
- ะกััะพัะฝะฐั ะฝะพัะผะฐ (TDEE): ${data.tdee} ะบะบะฐะป
- ะะตะบะพะผะตะฝะดัะตะผะฐั ะบะฐะปะพัะธะนะฝะพััั: ${data.targetCalories} ะบะบะฐะป
- ะะะข: ${data.bmi.toFixed(1)}
- ะะดะตะฐะปัะฝัะน ะฒะตั: ${data.idealWeightRange.min}-${data.idealWeightRange.max} ะบะณ

ะคะะะะะข ะะขะะะขะ (ัััะพะณะพ ัะพะฑะปัะดะฐะน):
๐ ะะฐัะฐ ัะธััะฐัะธั
[2-3 ะฟัะตะดะปะพะถะตะฝะธั ะพ ัะตะบััะตะผ ัะพััะพัะฝะธะธ ั ะบะพะฝะบัะตัะฝัะผะธ ัะธััะฐะผะธ]

โก ะัะพะฑะตะฝะฝะพััั ะฒะฐัะตะณะพ ัะปััะฐั  
[1-2 ะฟัะตะดะปะพะถะตะฝะธั ะฟัะพ ะฒะพะทัะฐัั/ะฟะพะป/ะฐะบัะธะฒะฝะพััั]

๐ฏ ะะพะฝะบัะตัะฝัะน ะฟะปะฐะฝ
โข [ะะตะบะพะผะตะฝะดะฐัะธั 1 ั ัะธััะฐะผะธ]
โข [ะะตะบะพะผะตะฝะดะฐัะธั 2 ั ัะธััะฐะผะธ]
โข [ะะตะบะพะผะตะฝะดะฐัะธั 3 ั ัะธััะฐะผะธ]

โ๏ธ ะะฐะถะฝะพ
[1 ะฟัะตะดะปะพะถะตะฝะธะต โ ััะพ ะะ ะดะตะปะฐัั ะธะปะธ ะพ ััะผ ะฟะพะผะฝะธัั]

ะะะะะะะ:
- ะะฑัะฐัะฐะนัั ะฝะฐ "ะฒั"
- ะัะฟะพะปัะทัะน ะบะพะฝะบัะตัะฝัะต ัะธััั ะธะท ะดะฐะฝะฝัั
- ะะปะธะฝะฐ: 150-200 ัะปะพะฒ
- ะะ ะธัะฟะพะปัะทัะน markdown (ะถะธัะฝัะน, ะบัััะธะฒ) โ ัะพะปัะบะพ ัะผะพะดะทะธ
- ะะธัะธ ะฟัะพัััะผ ัะทัะบะพะผ ะฑะตะท ะผะตะดะธัะธะฝัะบะธั ัะตัะผะธะฝะพะฒ`,

  bmi: (data: BMIData) => `ะขั โ ัะบัะฟะตัั ะฟะพ ะทะดะพัะพะฒัั. ะัะพะฐะฝะฐะปะธะทะธััะน ัะตะทัะปััะฐั ัะฐััััะฐ ะะะข.

ะะะะะซะ:
- ะะพะป: ${data.gender === 'male' ? 'ะผัะถัะธะฝะฐ' : 'ะถะตะฝัะธะฝะฐ'}
- ะะพะทัะฐัั: ${data.age} ะปะตั
- ะะพัั: ${data.height} ัะผ
- ะะตั: ${data.weight} ะบะณ
- ะะะข: ${data.bmi.toFixed(1)}
- ะะฐัะตะณะพัะธั: ${data.category}
- ะะดะตะฐะปัะฝัะน ะฒะตั: ${data.idealRange.min}-${data.idealRange.max} ะบะณ

ะคะะะะะข ะะขะะะขะ:
๐ ะะฐั ัะตะทัะปััะฐั ะฒ ะบะพะฝัะตะบััะต
[ะงัะพ ะพะทะฝะฐัะฐะตั ััะพั ะะะข, 2-3 ะฟัะตะดะปะพะถะตะฝะธั]

๐ฅ ะกัะฐะฒะฝะตะฝะธะต
[ะะฐะบ ะฒะฐั ะฟะพะบะฐะทะฐัะตะปั ะพัะฝะพัะธัะตะปัะฝะพ ััะตะดะฝะตะณะพ ะดะปั ะฒะพะทัะฐััะฐ/ะฟะพะปะฐ]

๐ฏ ะฆะตะปั
[ะะฐะบะพะน ะฒะตั ะฑัะป ะฑั ะพะฟัะธะผะฐะปะตะฝ, ะบะพะฝะบัะตัะฝัะต ัะธััั]

๐ก ะัะฐะฝั
[ะะณัะฐะฝะธัะตะฝะธั ะะะข ะบะฐะบ ะผะตััะธะบะธ, ััะพ ะตัั ััะธััะฒะฐัั]

ะะปะธะฝะฐ: 120-150 ัะปะพะฒ. ะัะพััะพะน ัะทัะบ, ะบะพะฝะบัะตัะฝัะต ัะธััั.`,

  pregnancy: (data: PregnancyData) => `ะขั โ ะดััะถะตะปัะฑะฝัะน ะฟะพะผะพัะฝะธะบ ะดะปั ะฑะตัะตะผะตะฝะฝัั. ะะฐะน ััะฟะปัะน, ะฟะพะดะดะตัะถะธะฒะฐััะธะน ะฐะฝะฐะปะธะท.

ะะะะะซะ:
- ะขะตะบััะฐั ะฝะตะดะตะปั: ${data.currentWeek}
- ะะตะฝั: ${data.currentDay}
- ะขัะธะผะตััั: ${data.trimester}
- ะะะ: ${data.dueDate}
- ะะฝะตะน ะดะพ ัะพะดะพะฒ: ${data.daysLeft}

ะคะะะะะข ะะขะะะขะ:
๐ [ะขัะฟะปะพะต ะฟัะธะฒะตัััะฒะธะต ั ัะตะบััะตะน ะฝะตะดะตะปะตะน]

๐ ะงัะพ ะฟัะพะธััะพะดะธั ัะตะนัะฐั
[2-3 ะธะฝัะตัะตัะฝัั ัะฐะบัะฐ ะพ ัะฐะทะฒะธัะธะธ ะผะฐะปััะฐ ะฝะฐ ััะพะน ะฝะตะดะตะปะต]

โ ะงัะพ ัะถะต ะฟะพะทะฐะดะธ
[ะะฐะบะธะต ะฒะฐะถะฝัะต ััะฐะฟั ะฟัะพะนะดะตะฝั]

๐ ะงัะพ ะฒะฟะตัะตะดะธ
[ะะปะธะถะฐะนัะธะต 2-4 ะฝะตะดะตะปะธ โ ัะพะฑััะธั, ะพะฑัะปะตะดะพะฒะฐะฝะธั]

๐ก ะกะพะฒะตั ะฝะฐ ััะพั ะฟะตัะธะพะด
[1 ะบะพะฝะบัะตัะฝะฐั ัะตะบะพะผะตะฝะดะฐัะธั]

ะะะะะะะ:
- ะขะพะฝ: ััะฟะปัะน, ะฟะพะดะดะตัะถะธะฒะฐััะธะน, ัะฐะดะพััะฝัะน
- ะะ ะดะฐะฒะฐะน ะผะตะดะธัะธะฝัะบะธั ัะพะฒะตัะพะฒ, ัะพะปัะบะพ ะพะฑััั ะธะฝัะพัะผะฐัะธั
- ะะปะธะฝะฐ: 150-180 ัะปะพะฒ`,

  whatif: (data: WhatIfData) => `ะขั โ ะผะพัะธะฒะธััััะธะน ััะตะฝะตั ะฟะพ ะฟะธัะฐะฝะธั. ะัะพะฐะฝะฐะปะธะทะธััะน ะฟะปะฐะฝ ะฟะพััะดะตะฝะธั.

ะะะะะซะ:
- ะขะตะบััะธะน ะฒะตั: ${data.currentWeight} ะบะณ
- ะฆะตะปะตะฒะพะน ะฒะตั: ${data.targetWeight} ะบะณ
- ะัะถะฝะพ ัะฑัะพัะธัั: ${data.weightToLose} ะบะณ
- ะะตัะธัะธั ะบะฐะปะพัะธะน: ${data.deficit} ะบะบะฐะป/ะดะตะฝั
- ะกัะพะบ: ${data.weeksNeeded} ะฝะตะดะตะปั
- ะะฐัะฐ ัะตะปะธ: ${data.targetDate}
- ะะพัะตัั ะฒ ะฝะตะดะตะปั: ${data.weeklyLoss.toFixed(2)} ะบะณ

ะคะะะะะข ะะขะะะขะ:
๐ฏ ะะฐัะฐ ัะตะปั
[ะัะตะฝะบะฐ ัะตะฐะปะธััะธัะฝะพััะธ, 2 ะฟัะตะดะปะพะถะตะฝะธั]

๐ ะะฐั ะฟััั
[ะะธะทัะฐะปะธะทะฐัะธั: ัะตัะตะท ะผะตััั X ะบะณ, ัะตัะตะท ะดะฒะฐ Y ะบะณ]

๐ช ะงัะพ ะฟะพะผะพะถะตั
โข [ะกะพะฒะตั 1]
โข [ะกะพะฒะตั 2]  
โข [ะกะพะฒะตั 3]

โ๏ธ ะะพะทะผะพะถะฝัะต ัะปะพะถะฝะพััะธ
[ะะฐ ะบะฐะบะพะน ะฝะตะดะตะปะต ะพะฑััะฝะพ ัะปะพะถะฝะตะต, ะบะฐะบ ัะฟัะฐะฒะธัััั]

ะขะพะฝ: ะผะพัะธะฒะธััััะธะน, ะฝะพ ัะตะฐะปะธััะธัะฝัะน. ะะปะธะฝะฐ: 130-160 ัะปะพะฒ.`,

}
```

**API Route:**

```typescript
// app/api/ai/analyze/route.ts

import { NextRequest, NextResponse } from 'next/server'
import { Redis } from '@upstash/redis'  // ะธะปะธ ะดััะณะพะน ะบัั
import OpenAI from 'openai'
import { AI_PROMPTS } from '@/lib/ai/prompts'

const redis = new Redis({
  url: process.env.UPSTASH_REDIS_URL!,
  token: process.env.UPSTASH_REDIS_TOKEN!,
})

const openai = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
})

// ะะตะฝะตัะธััะตะผ ะบะปัั ะบััะฐ ั "ะฑะฐะบะตัะฐะผะธ" ะดะปั ะณััะฟะฟะธัะพะฒะบะธ ะฟะพัะพะถะธั ะทะฐะฟัะพัะพะฒ
function getCacheKey(type: string, data: Record<string, any>): string {
  switch (type) {
    case 'calories':
      const ageBucket = Math.floor(data.age / 5) * 5
      const bmiBucket = Math.floor(data.bmi / 2) * 2
      return `ai:calories:${data.gender}:${ageBucket}:${bmiBucket}:${data.activity}:${data.goal}`
    
    case 'bmi':
      const bmiCat = data.bmi < 18.5 ? 'under' : data.bmi < 25 ? 'normal' : data.bmi < 30 ? 'over' : 'obese'
      return `ai:bmi:${data.gender}:${Math.floor(data.age / 10) * 10}:${bmiCat}`
    
    case 'pregnancy':
      return `ai:pregnancy:${data.currentWeek}`
    
    default:
      return `ai:${type}:${JSON.stringify(data)}`
  }
}

export async function POST(request: NextRequest) {
  try {
    const { type, data } = await request.json()
    
    // ะะฐะปะธะดะฐัะธั
    if (!type || !data || !AI_PROMPTS[type as keyof typeof AI_PROMPTS]) {
      return NextResponse.json({ error: 'Invalid request' }, { status: 400 })
    }
    
    // ะัะพะฒะตััะตะผ ะบัั
    const cacheKey = getCacheKey(type, data)
    const cached = await redis.get(cacheKey)
    
    if (cached) {
      return NextResponse.json({ analysis: cached, cached: true })
    }
    
    // ะะตะฝะตัะธััะตะผ ะฟัะพะผั
    const promptFn = AI_PROMPTS[type as keyof typeof AI_PROMPTS]
    const prompt = promptFn(data)
    
    // ะะฐะฟัะพั ะบ OpenAI
    const completion = await openai.chat.completions.create({
      model: 'gpt-4o-mini',  // ะะตััะฒะฐั ะผะพะดะตะปั, ะดะพััะฐัะพัะฝะฐั ะดะปั ัะตะบะพะผะตะฝะดะฐัะธะน
      messages: [{ role: 'user', content: prompt }],
      max_tokens: 400,
      temperature: 0.7,
    })
    
    const analysis = completion.choices[0]?.message?.content || ''
    
    // ะกะพััะฐะฝัะตะผ ะฒ ะบัั ะฝะฐ 24 ัะฐัะฐ
    await redis.set(cacheKey, analysis, { ex: 86400 })
    
    return NextResponse.json({ analysis, cached: false })
    
  } catch (error) {
    console.error('AI Analysis error:', error)
    return NextResponse.json(
      { error: 'Failed to generate analysis' }, 
      { status: 500 }
    )
  }
}
```

**UI ะบะพะผะฟะพะฝะตะฝั ะดะปั ะะ-ะฐะฝะฐะปะธะทะฐ:**

```tsx
// components/features/AIAnalysis.tsx
"use client"

import { useState } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Sparkles, Loader2, RefreshCw } from "lucide-react"

interface AIAnalysisProps {
  calculatorType: 'calories' | 'bmi' | 'pregnancy' | 'whatif'
  data: Record<string, any>
  /** ะะพะบะฐะทัะฒะฐัั ััะฐะทั ะธะปะธ ะฟะพ ะบะปะธะบั */
  autoLoad?: boolean
}

export function AIAnalysis({ calculatorType, data, autoLoad = false }: AIAnalysisProps) {
  const [analysis, setAnalysis] = useState<string | null>(null)
  const [isLoading, setIsLoading] = useState(false)
  const [isVisible, setIsVisible] = useState(autoLoad)
  const [error, setError] = useState<string | null>(null)

  const fetchAnalysis = async () => {
    setIsLoading(true)
    setIsVisible(true)
    setError(null)
    
    try {
      const response = await fetch('/api/ai/analyze', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ type: calculatorType, data }),
      })
      
      if (!response.ok) throw new Error('Failed to fetch')
      
      const result = await response.json()
      setAnalysis(result.analysis)
      
    } catch (err) {
      setError('ะะต ัะดะฐะปะพัั ะทะฐะณััะทะธัั ะฐะฝะฐะปะธะท. ะะพะฟัะพะฑัะนัะต ะฟะพะทะถะต.')
    } finally {
      setIsLoading(false)
    }
  }

  // ะะฒัะพะทะฐะณััะทะบะฐ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ะดะฐะฝะฝัั
  useEffect(() => {
    if (autoLoad && data) {
      fetchAnalysis()
    }
  }, [autoLoad, JSON.stringify(data)])

  if (!isVisible) {
    return (
      <Button 
        onClick={fetchAnalysis}
        variant="outline"
        className="w-full gap-2 h-12 text-base border-primary/30 hover:bg-primary/5"
      >
        <Sparkles className="w-5 h-5 text-primary" />
        ะะพะบะฐะทะฐัั ะะ-ะฐะฝะฐะปะธะท
      </Button>
    )
  }

  return (
    <Card className="border-primary/20 bg-gradient-to-br from-primary/5 to-transparent">
      <CardHeader className="pb-3">
        <CardTitle className="flex items-center justify-between text-lg">
          <span className="flex items-center gap-2">
            <Sparkles className="w-5 h-5 text-primary" />
            ะะตััะพะฝะฐะปัะฝัะน ะฐะฝะฐะปะธะท
          </span>
          {!isLoading && analysis && (
            <Button 
              variant="ghost" 
              size="sm"
              onClick={fetchAnalysis}
              className="h-8 w-8 p-0"
              title="ะะฑะฝะพะฒะธัั ะฐะฝะฐะปะธะท"
            >
              <RefreshCw className="w-4 h-4" />
            </Button>
          )}
        </CardTitle>
      </CardHeader>
      <CardContent>
        {isLoading ? (
          <div className="flex flex-col items-center justify-center py-8 gap-3">
            <Loader2 className="w-8 h-8 animate-spin text-primary" />
            <span className="text-muted-foreground">ะะฝะฐะปะธะทะธััะตะผ ะฒะฐัะธ ะดะฐะฝะฝัะต...</span>
          </div>
        ) : error ? (
          <div className="text-center py-6">
            <p className="text-muted-foreground mb-3">{error}</p>
            <Button variant="outline" size="sm" onClick={fetchAnalysis}>
              ะะพะฟัะพะฑะพะฒะฐัั ัะฝะพะฒะฐ
            </Button>
          </div>
        ) : (
          <div className="space-y-4">
            {analysis?.split('\n\n').map((paragraph, i) => (
              <p key={i} className="text-sm leading-relaxed">
                {paragraph}
              </p>
            ))}
          </div>
        )}
      </CardContent>
    </Card>
  )
}
```

**ะะฐัััั ััะพะธะผะพััะธ ะะ:**

```
ะกะขะะะะะกะขะฌ ะก GPT-4o-mini:

ะัะพะผั: ~400 ัะพะบะตะฝะพะฒ ร $0.15/1M = $0.00006
ะัะฒะตั: ~300 ัะพะบะตะฝะพะฒ ร $0.60/1M = $0.00018
ะัะพะณะพ ะทะฐ 1 ะทะฐะฟัะพั: $0.00024 โ 0.024 โฝ

ะะะกะงะะข (5,000 ะฟะพัะตัะธัะตะปะตะน/ะดะตะฝั):
- 30% ะธัะฟะพะปัะทััั ะะ = 1,500 ะทะฐะฟัะพัะพะฒ
- ะััะธัะพะฒะฐะฝะธะต 90% = 150 ัะตะฐะปัะฝัั ะทะฐะฟัะพัะพะฒ
- ะกัะพะธะผะพััั: 150 ร 0.024 โฝ = 3.6 โฝ/ะดะตะฝั
- ะ ะผะตััั: ~110 โฝ

ะะะกะงะะข (10,000 ะฟะพัะตัะธัะตะปะตะน/ะดะตะฝั):
- 30% ร 10% = 300 ัะตะฐะปัะฝัั ะทะฐะฟัะพัะพะฒ/ะดะตะฝั
- ะ ะผะตััั: ~220 โฝ

ะะซะะะ: ะกัะพะธะผะพััั ะผะธะฝะธะผะฐะปัะฝะฐ ะฑะปะฐะณะพะดะฐัั ะบััะธัะพะฒะฐะฝะธั!
```

**ะงัะพ ััะพ:** ะะพะบะฐะทัะฒะฐะตะผ ัะตะทัะปััะฐั ััะฐะทั ะฟะพ ะฝะตัะบะพะปัะบะธะผ ัะพัะผัะปะฐะผ ั ะพะฑัััะฝะตะฝะธะตะผ ัะฐะทะฝะธัั.

**ะะดะต ะธัะฟะพะปัะทะพะฒะฐัั:** ะะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน, ะธะดะตะฐะปัะฝัะน ะฒะตั, ะฑะฐะทะพะฒัะน ะผะตัะฐะฑะพะปะธะทะผ

```tsx
// components/features/FormulaComparison.tsx
"use client"

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Info } from "lucide-react"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"

interface FormulaResult {
  name: string
  value: number
  description: string
  isRecommended?: boolean
}

interface FormulaComparisonProps {
  results: FormulaResult[]
  unit: string
}

export function FormulaComparison({ results, unit }: FormulaComparisonProps) {
  const min = Math.min(...results.map(r => r.value))
  const max = Math.max(...results.map(r => r.value))
  const recommended = results.find(r => r.isRecommended)
  
  return (
    <Card>
      <CardHeader>
        <CardTitle className="flex items-center gap-2">
          ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป
          <TooltipProvider>
            <Tooltip>
              <TooltipTrigger>
                <Info className="w-4 h-4 text-muted-foreground" />
              </TooltipTrigger>
              <TooltipContent className="max-w-[300px]">
                <p>ะะฐะทะฝัะต ัะพัะผัะปั ะดะฐัั ัะฐะทะฝัะต ัะตะทัะปััะฐัั. 
                ะั ัะตะบะพะผะตะฝะดัะตะผ ัะพัะผัะปั ะะธััะปะธะฝะฐ-ะกะฐะฝ ะะตะพัะฐ ะบะฐะบ ะฝะฐะธะฑะพะปะตะต 
                ัะพัะฝัั ะดะปั ัะพะฒัะตะผะตะฝะฝัั ะปัะดะตะน.</p>
              </TooltipContent>
            </Tooltip>
          </TooltipProvider>
        </CardTitle>
      </CardHeader>
      <CardContent>
        <div className="space-y-3">
          {results.map((result) => (
            <div
              key={result.name}
              className={`flex items-center justify-between p-3 rounded-lg border ${
                result.isRecommended 
                  ? 'bg-primary/5 border-primary' 
                  : 'bg-muted/50'
              }`}
            >
              <div className="flex items-center gap-2">
                <span className="font-medium">{result.name}</span>
                {result.isRecommended && (
                  <Badge variant="default" className="text-xs">
                    ะะตะบะพะผะตะฝะดัะตะผ
                  </Badge>
                )}
              </div>
              <div className="text-right">
                <span className="text-lg font-bold">
                  {result.value.toLocaleString('ru-RU')}
                </span>
                <span className="text-muted-foreground ml-1">{unit}</span>
              </div>
            </div>
          ))}
        </div>
        
        {/* ะะธะฐะฟะฐะทะพะฝ */}
        <div className="mt-4 p-3 bg-muted rounded-lg">
          <div className="flex justify-between text-sm">
            <span className="text-muted-foreground">ะะธะฐะฟะฐะทะพะฝ ะทะฝะฐัะตะฝะธะน:</span>
            <span className="font-medium">
              {min.toLocaleString('ru-RU')} โ {max.toLocaleString('ru-RU')} {unit}
            </span>
          </div>
        </div>
      </CardContent>
    </Card>
  )
}

// ะัะฟะพะปัะทะพะฒะฐะฝะธะต:
const calorieResults: FormulaResult[] = [
  { 
    name: "ะะธััะปะธะฝะฐ-ะกะฐะฝ ะะตะพัะฐ", 
    value: 1847, 
    description: "ะกะฐะผะฐั ัะพัะฝะฐั ะดะปั ัะพะฒัะตะผะตะฝะฝัั ะปัะดะตะน",
    isRecommended: true 
  },
  { name: "ะฅะฐััะธัะฐ-ะะตะฝะตะดะธะบัะฐ", value: 1921, description: "ะะปะฐััะธัะตัะบะฐั ัะพัะผัะปะฐ 1919 ะณะพะดะฐ" },
  { name: "ะฅะฐััะธัะฐ-ะะตะฝะตะดะธะบัะฐ (1984)", value: 1889, description: "ะะตัะตัะผะพััะตะฝะฝะฐั ะฒะตััะธั" },
  { name: "ะะตััะฐ-ะะฐะบะัะดะปะฐ", value: 1756, description: "ะฃัะธััะฒะฐะตั ะฟัะพัะตะฝั ะถะธัะฐ" },
  { name: "ะะะ", value: 1812, description: "ะคะพัะผัะปะฐ ะัะตะผะธัะฝะพะน ะพัะณะฐะฝะธะทะฐัะธะธ ะทะดัะฐะฒะพะพััะฐะฝะตะฝะธั" },
]

<FormulaComparison results={calorieResults} unit="ะบะบะฐะป" />
```

---

### 2. ะญะบัะฟะพัั ะฒ PDF

**ะงัะพ ััะพ:** ะะฝะพะฟะบะฐ "ะกะบะฐัะฐัั PDF" ะณะตะฝะตัะธััะตั ะบัะฐัะธะฒัะน ะพัััั ั ัะตะทัะปััะฐัะฐะผะธ.

**ะะดะต ะธัะฟะพะปัะทะพะฒะฐัั:** ะะกะ ะบะฐะปัะบัะปััะพัั

**ะะธะฑะปะธะพัะตะบะฐ:** `@react-pdf/renderer` ะธะปะธ `html2canvas` + `jspdf`

```bash
npm install @react-pdf/renderer
# ะธะปะธ ะดะปั ะฟัะพััะพะณะพ ะฒะฐัะธะฐะฝัะฐ:
npm install html2canvas jspdf
```

```tsx
// components/features/ExportPDF.tsx
"use client"

import { Button } from "@/components/ui/button"
import { Download } from "lucide-react"
import html2canvas from "html2canvas"
import jsPDF from "jspdf"
import { useState } from "react"

interface ExportPDFProps {
  /** ID ัะปะตะผะตะฝัะฐ ะดะปั ัะบัะฟะพััะฐ */
  targetId: string
  /** ะะผั ัะฐะนะปะฐ (ะฑะตะท .pdf) */
  filename: string
  /** ะะฐะณะพะปะพะฒะพะบ ะฒ PDF */
  title: string
}

export function ExportPDF({ targetId, filename, title }: ExportPDFProps) {
  const [isLoading, setIsLoading] = useState(false)
  
  const handleExport = async () => {
    setIsLoading(true)
    
    try {
      const element = document.getElementById(targetId)
      if (!element) return
      
      // ะกะพะทะดะฐัะผ canvas ะธะท HTML
      const canvas = await html2canvas(element, {
        scale: 2, // ะัััะตะต ะบะฐัะตััะฒะพ
        useCORS: true,
        logging: false,
      })
      
      // ะกะพะทะดะฐัะผ PDF
      const imgData = canvas.toDataURL('image/png')
      const pdf = new jsPDF({
        orientation: 'portrait',
        unit: 'mm',
        format: 'a4',
      })
      
      // ะะฐะทะผะตัั
      const pdfWidth = pdf.internal.pageSize.getWidth()
      const pdfHeight = pdf.internal.pageSize.getHeight()
      const imgWidth = canvas.width
      const imgHeight = canvas.height
      const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight)
      const imgX = (pdfWidth - imgWidth * ratio) / 2
      const imgY = 20
      
      // ะะฐะณะพะปะพะฒะพะบ
      pdf.setFontSize(18)
      pdf.text(title, pdfWidth / 2, 15, { align: 'center' })
      
      // ะะทะพะฑัะฐะถะตะฝะธะต ัะตะทัะปััะฐัะพะฒ
      pdf.addImage(
        imgData, 
        'PNG', 
        imgX, 
        imgY, 
        imgWidth * ratio * 0.9, 
        imgHeight * ratio * 0.9
      )
      
      // ะคััะตั
      pdf.setFontSize(10)
      pdf.setTextColor(128, 128, 128)
      pdf.text(
        `ะกะพะทะดะฐะฝะพ ะฝะฐ mycalc.ru โข ${new Date().toLocaleDateString('ru-RU')}`,
        pdfWidth / 2,
        pdfHeight - 10,
        { align: 'center' }
      )
      
      // ะกะบะฐัะธะฒะฐะตะผ
      pdf.save(`${filename}.pdf`)
      
    } catch (error) {
      console.error('ะัะธะฑะบะฐ ัะบัะฟะพััะฐ PDF:', error)
    } finally {
      setIsLoading(false)
    }
  }
  
  return (
    <Button 
      variant="outline" 
      onClick={handleExport}
      disabled={isLoading}
      className="gap-2"
    >
      <Download className="w-4 h-4" />
      {isLoading ? 'ะกะพะทะดะฐัะผ PDF...' : 'ะกะบะฐัะฐัั PDF'}
    </Button>
  )
}

// ะัะฟะพะปัะทะพะฒะฐะฝะธะต ะฒ ะบะฐะปัะบัะปััะพัะต:
<div id="result-for-pdf">
  <ResultCard ... />
  <FormulaComparison ... />
</div>

<ExportPDF 
  targetId="result-for-pdf"
  filename="ัะฐัััั-ะบะฐะปะพัะธะน"
  title="ะะฐัััั ัััะพัะฝะพะน ะฝะพัะผั ะบะฐะปะพัะธะน"
/>
```

**ะัะพะดะฒะธะฝัััะน ะฒะฐัะธะฐะฝั ั @react-pdf/renderer:**

```tsx
// components/features/CaloriePDFReport.tsx
import { 
  Document, 
  Page, 
  Text, 
  View, 
  StyleSheet,
  pdf 
} from '@react-pdf/renderer'

const styles = StyleSheet.create({
  page: {
    padding: 40,
    fontFamily: 'Helvetica',
  },
  title: {
    fontSize: 24,
    marginBottom: 20,
    textAlign: 'center',
  },
  section: {
    marginBottom: 15,
  },
  label: {
    fontSize: 12,
    color: '#666',
    marginBottom: 4,
  },
  value: {
    fontSize: 18,
    fontWeight: 'bold',
  },
  row: {
    flexDirection: 'row',
    justifyContent: 'space-between',
    paddingVertical: 8,
    borderBottomWidth: 1,
    borderBottomColor: '#eee',
  },
  footer: {
    position: 'absolute',
    bottom: 30,
    left: 40,
    right: 40,
    textAlign: 'center',
    fontSize: 10,
    color: '#999',
  },
})

interface CalorieReportProps {
  data: {
    bmr: number
    tdee: number
    forLoss: number
    forGain: number
    protein: number
    fat: number
    carbs: number
    formulas: { name: string; value: number }[]
  }
  inputs: {
    gender: string
    age: number
    height: number
    weight: number
    activity: string
  }
}

export function CaloriePDFReport({ data, inputs }: CalorieReportProps) {
  return (
    <Document>
      <Page size="A4" style={styles.page}>
        <Text style={styles.title}>ะะฐัััั ัััะพัะฝะพะน ะฝะพัะผั ะบะฐะปะพัะธะน</Text>
        
        {/* ะัะพะดะฝัะต ะดะฐะฝะฝัะต */}
        <View style={styles.section}>
          <Text style={{ fontSize: 14, marginBottom: 10 }}>ะะฐัะธ ะดะฐะฝะฝัะต:</Text>
          <Text>ะะพะป: {inputs.gender === 'male' ? 'ะัะถัะบะพะน' : 'ะะตะฝัะบะธะน'}</Text>
          <Text>ะะพะทัะฐัั: {inputs.age} ะปะตั</Text>
          <Text>ะะพัั: {inputs.height} ัะผ</Text>
          <Text>ะะตั: {inputs.weight} ะบะณ</Text>
          <Text>ะะบัะธะฒะฝะพััั: {inputs.activity}</Text>
        </View>
        
        {/* ะะตะทัะปััะฐัั */}
        <View style={styles.section}>
          <Text style={{ fontSize: 14, marginBottom: 10 }}>ะะตะทัะปััะฐัั:</Text>
          
          <View style={styles.row}>
            <Text>ะะฐะทะพะฒัะน ะผะตัะฐะฑะพะปะธะทะผ (BMR)</Text>
            <Text style={styles.value}>{data.bmr} ะบะบะฐะป</Text>
          </View>
          
          <View style={styles.row}>
            <Text>ะกััะพัะฝะฐั ะฝะพัะผะฐ (TDEE)</Text>
            <Text style={styles.value}>{data.tdee} ะบะบะฐะป</Text>
          </View>
          
          <View style={styles.row}>
            <Text>ะะปั ะฟะพััะดะตะฝะธั (-15%)</Text>
            <Text style={styles.value}>{data.forLoss} ะบะบะฐะป</Text>
          </View>
          
          <View style={styles.row}>
            <Text>ะะปั ะฝะฐะฑะพัะฐ ะผะฐััั (+15%)</Text>
            <Text style={styles.value}>{data.forGain} ะบะบะฐะป</Text>
          </View>
        </View>
        
        {/* ะะะฃ */}
        <View style={styles.section}>
          <Text style={{ fontSize: 14, marginBottom: 10 }}>
            ะะตะบะพะผะตะฝะดัะตะผะพะต ะะะฃ (ะฟัะธ {data.tdee} ะบะบะฐะป):
          </Text>
          <Text>ะะตะปะบะธ: {data.protein} ะณ</Text>
          <Text>ะะธัั: {data.fat} ะณ</Text>
          <Text>ะฃะณะปะตะฒะพะดั: {data.carbs} ะณ</Text>
        </View>
        
        {/* ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป */}
        <View style={styles.section}>
          <Text style={{ fontSize: 14, marginBottom: 10 }}>ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป:</Text>
          {data.formulas.map((formula) => (
            <View key={formula.name} style={styles.row}>
              <Text>{formula.name}</Text>
              <Text>{formula.value} ะบะบะฐะป</Text>
            </View>
          ))}
        </View>
        
        <Text style={styles.footer}>
          ะกะพะทะดะฐะฝะพ ะฝะฐ mycalc.ru โข {new Date().toLocaleDateString('ru-RU')}
        </Text>
      </Page>
    </Document>
  )
}

// ะคัะฝะบัะธั ะดะปั ัะบะฐัะธะฒะฐะฝะธั
export async function downloadCaloriePDF(data: CalorieReportProps['data'], inputs: CalorieReportProps['inputs']) {
  const blob = await pdf(<CaloriePDFReport data={data} inputs={inputs} />).toBlob()
  const url = URL.createObjectURL(blob)
  const link = document.createElement('a')
  link.href = url
  link.download = 'ัะฐัััั-ะบะฐะปะพัะธะน.pdf'
  link.click()
  URL.revokeObjectURL(url)
}
```

---

### 3. ะะตะถะธะผ "ะงัะพ ะตัะปะธ" (WhatIfMode)

**ะงัะพ ััะพ:** ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะดะฐัั ัะตะปั โ ะบะฐะปัะบัะปััะพั ะฟะพะบะฐะทัะฒะฐะตั ะฟััั ะธ ััะพะบะธ.

**ะะดะต ะธัะฟะพะปัะทะพะฒะฐัั:** ะะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน, ะดะตัะธัะธั ะบะฐะปะพัะธะน

```tsx
// components/features/WhatIfMode.tsx
"use client"

import { useState } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Slider } from "@/components/ui/slider"
import { Badge } from "@/components/ui/badge"
import { TrendingDown, Calendar, Target, AlertTriangle } from "lucide-react"

interface WhatIfModeProps {
  currentWeight: number
  tdee: number
}

export function WhatIfMode({ currentWeight, tdee }: WhatIfModeProps) {
  const [targetWeight, setTargetWeight] = useState(currentWeight - 5)
  const [deficit, setDeficit] = useState(500) // ะบะบะฐะป/ะดะตะฝั
  
  // ะะฐััััั
  const weightToLose = currentWeight - targetWeight
  const caloriesPerKg = 7700 // ะบะบะฐะป ะฒ 1 ะบะณ ะถะธัะฐ
  const totalCaloriesToBurn = weightToLose * caloriesPerKg
  const daysNeeded = Math.ceil(totalCaloriesToBurn / deficit)
  const weeksNeeded = Math.ceil(daysNeeded / 7)
  const monthsNeeded = (daysNeeded / 30).toFixed(1)
  
  const targetDate = new Date()
  targetDate.setDate(targetDate.getDate() + daysNeeded)
  
  const dailyCalories = tdee - deficit
  const weeklyLoss = (deficit * 7) / caloriesPerKg
  
  // ะัะตะดัะฟัะตะถะดะตะฝะธั
  const isTooFast = deficit > 1000
  const isTooLow = dailyCalories < 1200
  const isHealthy = !isTooFast && !isTooLow && weeklyLoss <= 1
  
  return (
    <Card>
      <CardHeader>
        <CardTitle className="flex items-center gap-2">
          <Target className="w-5 h-5" />
          ะะตะถะธะผ "ะงัะพ ะตัะปะธ"
        </CardTitle>
      </CardHeader>
      <CardContent className="space-y-6">
        
        {/* ะฆะตะปะตะฒะพะน ะฒะตั */}
        <div className="space-y-3">
          <div className="flex justify-between">
            <label className="text-sm font-medium">ะฆะตะปะตะฒะพะน ะฒะตั</label>
            <span className="text-2xl font-bold">{targetWeight} ะบะณ</span>
          </div>
          <Slider
            value={[targetWeight]}
            onValueChange={(v) => setTargetWeight(v[0])}
            min={currentWeight - 30}
            max={currentWeight - 1}
            step={0.5}
          />
          <div className="flex justify-between text-xs text-muted-foreground">
            <span>-30 ะบะณ</span>
            <span>-1 ะบะณ</span>
          </div>
        </div>
        
        {/* ะะตัะธัะธั ะบะฐะปะพัะธะน */}
        <div className="space-y-3">
          <div className="flex justify-between">
            <label className="text-sm font-medium">ะะตัะธัะธั ะบะฐะปะพัะธะน ะฒ ะดะตะฝั</label>
            <span className="text-2xl font-bold">{deficit} ะบะบะฐะป</span>
          </div>
          <Slider
            value={[deficit]}
            onValueChange={(v) => setDeficit(v[0])}
            min={200}
            max={1200}
            step={50}
          />
          <div className="flex justify-between text-xs text-muted-foreground">
            <span>ะะตะดะปะตะฝะฝะพ (200)</span>
            <span>ะััััะพ (1200)</span>
          </div>
        </div>
        
        {/* ะะตะทัะปััะฐัั ะฟัะพะณะฝะพะทะฐ */}
        <div className="grid grid-cols-2 gap-4">
          <div className="p-4 bg-muted rounded-lg text-center">
            <TrendingDown className="w-6 h-6 mx-auto mb-2 text-primary" />
            <div className="text-2xl font-bold">{weightToLose.toFixed(1)} ะบะณ</div>
            <div className="text-xs text-muted-foreground">ะฝัะถะฝะพ ัะฑัะพัะธัั</div>
          </div>
          
          <div className="p-4 bg-muted rounded-lg text-center">
            <Calendar className="w-6 h-6 mx-auto mb-2 text-primary" />
            <div className="text-2xl font-bold">{weeksNeeded} ะฝะตะด</div>
            <div className="text-xs text-muted-foreground">
              (~{monthsNeeded} ะผะตั)
            </div>
          </div>
        </div>
        
        {/* ะะปะฐะฝ ะฟะธัะฐะฝะธั */}
        <div className="p-4 border rounded-lg space-y-2">
          <h4 className="font-medium">ะะฐั ะฟะปะฐะฝ:</h4>
          <div className="grid grid-cols-2 gap-2 text-sm">
            <div>ะะฐะปะพัะธะน ะฒ ะดะตะฝั:</div>
            <div className="font-medium">{dailyCalories} ะบะบะฐะป</div>
            
            <div>ะะพัะตัั ะฒ ะฝะตะดะตะปั:</div>
            <div className="font-medium">{weeklyLoss.toFixed(2)} ะบะณ</div>
            
            <div>ะะฐัะฐ ะดะพััะธะถะตะฝะธั ัะตะปะธ:</div>
            <div className="font-medium">
              {targetDate.toLocaleDateString('ru-RU', { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric' 
              })}
            </div>
          </div>
        </div>
        
        {/* ะัะตะดัะฟัะตะถะดะตะฝะธั */}
        {!isHealthy && (
          <div className="p-4 bg-destructive/10 border border-destructive/20 rounded-lg">
            <div className="flex gap-2">
              <AlertTriangle className="w-5 h-5 text-destructive flex-shrink-0" />
              <div className="text-sm">
                {isTooFast && (
                  <p>โ๏ธ ะะตัะธัะธั ะฑะพะปััะต 1000 ะบะบะฐะป ะผะพะถะตั ะฟัะธะฒะตััะธ ะบ ะฟะพัะตัะต ะผััั ะธ ะทะฐะผะตะดะปะตะฝะธั ะผะตัะฐะฑะพะปะธะทะผะฐ.</p>
                )}
                {isTooLow && (
                  <p>โ๏ธ ะะฐะปะพัะธะนะฝะพััั ะฝะธะถะต 1200 ะบะบะฐะป ะพะฟะฐัะฝะฐ ะดะปั ะทะดะพัะพะฒัั ะฑะตะท ะฝะฐะฑะปัะดะตะฝะธั ะฒัะฐัะฐ.</p>
                )}
              </div>
            </div>
          </div>
        )}
        
        {isHealthy && (
          <Badge variant="secondary" className="w-full justify-center py-2">
            โ ะะดะพัะพะฒัะน ัะตะผะฟ ะฟะพััะดะตะฝะธั
          </Badge>
        )}
        
      </CardContent>
    </Card>
  )
}
```

**ะะธะทัะฐะปัะฝัะน ะณัะฐัะธะบ ะฟัะพะณัะตััะฐ:**

```tsx
// components/features/WeightProgressChart.tsx
"use client"

import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, ReferenceLine } from 'recharts'

interface WeightProgressChartProps {
  currentWeight: number
  targetWeight: number
  weeklyLoss: number
  weeks: number
}

export function WeightProgressChart({ 
  currentWeight, 
  targetWeight, 
  weeklyLoss, 
  weeks 
}: WeightProgressChartProps) {
  // ะะตะฝะตัะธััะตะผ ะดะฐะฝะฝัะต ะดะปั ะณัะฐัะธะบะฐ
  const data = Array.from({ length: weeks + 1 }, (_, i) => {
    const weight = Math.max(targetWeight, currentWeight - (weeklyLoss * i))
    const date = new Date()
    date.setDate(date.getDate() + (i * 7))
    
    return {
      week: i,
      weight: Number(weight.toFixed(1)),
      date: date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' }),
    }
  })
  
  return (
    <div className="h-[300px] w-full">
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={data} margin={{ top: 20, right: 30, left: 20, bottom: 20 }}>
          <CartesianGrid strokeDasharray="3 3" className="stroke-muted" />
          <XAxis 
            dataKey="date" 
            tick={{ fontSize: 12 }}
            className="text-muted-foreground"
          />
          <YAxis 
            domain={[targetWeight - 2, currentWeight + 2]}
            tick={{ fontSize: 12 }}
            className="text-muted-foreground"
          />
          <Tooltip 
            content={({ active, payload }) => {
              if (active && payload && payload.length) {
                return (
                  <div className="bg-background border rounded-lg p-2 shadow-lg">
                    <p className="font-medium">{payload[0].payload.date}</p>
                    <p className="text-primary">{payload[0].value} ะบะณ</p>
                  </div>
                )
              }
              return null
            }}
          />
          <ReferenceLine 
            y={targetWeight} 
            stroke="hsl(var(--primary))" 
            strokeDasharray="5 5"
            label={{ value: 'ะฆะตะปั', position: 'right' }}
          />
          <Line 
            type="monotone" 
            dataKey="weight" 
            stroke="hsl(var(--primary))"
            strokeWidth={2}
            dot={{ fill: "hsl(var(--primary))", r: 4 }}
            activeDot={{ r: 6 }}
          />
        </LineChart>
      </ResponsiveContainer>
    </div>
  )
}
```

---

### 4. ะกัะฐะฒะฝะตะฝะธะต "ะขั vs ะะพัะผะฐ" (Percentile)

**ะงัะพ ััะพ:** ะะพะบะฐะทัะฒะฐะตะผ ะณะดะต ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐัะพะดะธััั ะพัะฝะพัะธัะตะปัะฝะพ ะฝะฐัะตะปะตะฝะธั.

**ะะดะต ะธัะฟะพะปัะทะพะฒะฐัั:** ะะะข, ะฒะตั, ัะพัั, ะบะฐะปะพัะธะธ

```tsx
// components/features/PercentileComparison.tsx
"use client"

import { Card, CardContent } from "@/components/ui/card"
import { Users } from "lucide-react"

interface PercentileComparisonProps {
  value: number
  percentile: number // 0-100
  metric: string
  description: string
}

export function PercentileComparison({ 
  value, 
  percentile, 
  metric,
  description 
}: PercentileComparisonProps) {
  // ะะฟัะตะดะตะปัะตะผ ะฟะพะทะธัะธั ะธ ัะฒะตั
  const getColor = () => {
    if (percentile < 25) return 'text-blue-500'
    if (percentile < 75) return 'text-green-500'
    return 'text-orange-500'
  }
  
  const getMessage = () => {
    if (percentile < 5) return 'ะทะฝะฐัะธัะตะปัะฝะพ ะฝะธะถะต ะฑะพะปััะธะฝััะฒะฐ'
    if (percentile < 25) return 'ะฝะธะถะต ะฑะพะปััะธะฝััะฒะฐ'
    if (percentile < 50) return 'ะฝะตะผะฝะพะณะพ ะฝะธะถะต ััะตะดะฝะตะณะพ'
    if (percentile < 75) return 'ะฝะตะผะฝะพะณะพ ะฒััะต ััะตะดะฝะตะณะพ'
    if (percentile < 95) return 'ะฒััะต ะฑะพะปััะธะฝััะฒะฐ'
    return 'ะทะฝะฐัะธัะตะปัะฝะพ ะฒััะต ะฑะพะปััะธะฝััะฒะฐ'
  }
  
  return (
    <Card>
      <CardContent className="pt-6">
        <div className="flex items-center gap-3 mb-4">
          <Users className="w-5 h-5 text-muted-foreground" />
          <span className="text-sm text-muted-foreground">
            ะกัะฐะฒะฝะตะฝะธะต ั ะฝะฐัะตะปะตะฝะธะตะผ
          </span>
        </div>
        
        {/* ะะธะทัะฐะปัะฝะฐั ัะบะฐะปะฐ */}
        <div className="relative h-8 bg-gradient-to-r from-blue-100 via-green-100 to-orange-100 rounded-full overflow-hidden mb-4">
          {/* ะะฐัะบะตั ะฟะพะทะธัะธะธ */}
          <div 
            className="absolute top-0 bottom-0 w-1 bg-foreground rounded-full transition-all duration-500"
            style={{ left: `${percentile}%` }}
          />
          
          {/* ะะตัะบะธ */}
          <div className="absolute inset-0 flex justify-between items-center px-2 text-xs text-muted-foreground">
            <span>0%</span>
            <span>50%</span>
            <span>100%</span>
          </div>
        </div>
        
        {/* ะะตะทัะปััะฐั */}
        <div className="text-center space-y-1">
          <div className={`text-3xl font-bold ${getColor()}`}>
            {percentile}%
          </div>
          <p className="text-sm">
            ะะฐั {metric} <span className="font-medium">{getMessage()}</span>
          </p>
          <p className="text-xs text-muted-foreground">
            {description}
          </p>
        </div>
        
        {/* ะะธะทัะฐะปะธะทะฐัะธั ั ัะตะปะพะฒะตัะบะฐะผะธ */}
        <div className="mt-4 flex justify-center gap-0.5">
          {Array.from({ length: 20 }, (_, i) => {
            const isHighlighted = (i + 1) * 5 <= percentile
            return (
              <div
                key={i}
                className={`w-2 h-6 rounded-sm transition-colors ${
                  isHighlighted ? 'bg-primary' : 'bg-muted'
                }`}
              />
            )
          })}
        </div>
        <p className="text-center text-xs text-muted-foreground mt-2">
          ะั ะฒััะต, ัะตะผ {percentile}% ะปัะดะตะน ะฒะฐัะตะณะพ ะฒะพะทัะฐััะฐ ะธ ะฟะพะปะฐ
        </p>
      </CardContent>
    </Card>
  )
}

// ะะฐะฝะฝัะต ะฟะตััะตะฝัะธะปะตะน ะดะปั ะะะข (ะฟัะธะผะตั ะดะปั ะถะตะฝัะธะฝ 25-34 ะปะตั)
// ะััะพัะฝะธะบ: WHO, CDC
const bmiPercentiles = {
  female: {
    '25-34': [
      { percentile: 5, bmi: 18.0 },
      { percentile: 10, bmi: 19.2 },
      { percentile: 25, bmi: 21.4 },
      { percentile: 50, bmi: 24.5 },
      { percentile: 75, bmi: 29.1 },
      { percentile: 90, bmi: 35.2 },
      { percentile: 95, bmi: 40.1 },
    ],
  },
  male: {
    '25-34': [
      { percentile: 5, bmi: 19.8 },
      { percentile: 10, bmi: 21.0 },
      { percentile: 25, bmi: 23.5 },
      { percentile: 50, bmi: 26.5 },
      { percentile: 75, bmi: 30.2 },
      { percentile: 90, bmi: 34.8 },
      { percentile: 95, bmi: 38.5 },
    ],
  },
}

// ะคัะฝะบัะธั ะดะปั ะพะฟัะตะดะตะปะตะฝะธั ะฟะตััะตะฝัะธะปั
export function getPercentile(
  value: number, 
  data: { percentile: number; bmi: number }[]
): number {
  // ะะฝัะตัะฟะพะปััะธั ะผะตะถะดั ัะพัะบะฐะผะธ
  for (let i = 0; i < data.length - 1; i++) {
    if (value <= data[i].bmi) {
      if (i === 0) return data[0].percentile
      // ะะธะฝะตะนะฝะฐั ะธะฝัะตัะฟะพะปััะธั
      const ratio = (value - data[i-1].bmi) / (data[i].bmi - data[i-1].bmi)
      return Math.round(data[i-1].percentile + ratio * (data[i].percentile - data[i-1].percentile))
    }
  }
  return 99
}

// ะัะฟะพะปัะทะพะฒะฐะฝะธะต:
const bmi = 27.3
const percentile = getPercentile(bmi, bmiPercentiles.female['25-34'])

<PercentileComparison
  value={bmi}
  percentile={percentile}
  metric="ะะะข"
  description="ะกัะตะดะธ ะถะตะฝัะธะฝ 25-34 ะปะตั ะฒ ะะพััะธะธ"
/>
```

---

### 5. ะะฐะปะตะฝะดะฐัั ะฑะตัะตะผะตะฝะฝะพััะธ (PregnancyCalendar)

**ะงัะพ ััะพ:** ะะฝัะตัะฐะบัะธะฒะฝัะน ัะฐะนะผะปะฐะนะฝ ะฑะตัะตะผะตะฝะฝะพััะธ ั ะบะปััะตะฒัะผะธ ะดะฐัะฐะผะธ ะธ ะธะฝัะพัะผะฐัะธะตะน.

**ะะดะต ะธัะฟะพะปัะทะพะฒะฐัั:** ะะฐะปัะบัะปััะพั ะดะฐัั ัะพะดะพะฒ, ััะพะบ ะฑะตัะตะผะตะฝะฝะพััะธ

```tsx
// components/features/PregnancyCalendar.tsx
"use client"

import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Progress } from "@/components/ui/progress"
import { Calendar, Baby, Stethoscope, Heart, Briefcase } from "lucide-react"

interface PregnancyCalendarProps {
  dueDate: Date
  lastPeriod: Date
  currentWeek: number
  currentDay: number
}

// ะะฐะฝะฝัะต ะพ ัะฐะทะผะตัะต ะฟะปะพะดะฐ ะฟะพ ะฝะตะดะตะปัะผ
const fetusSizeByWeek: Record<number, { size: string; emoji: string; length: string; weight: string }> = {
  4: { size: 'ะผะฐะบะพะฒะพะต ะทััะฝััะบะพ', emoji: '๐ฑ', length: '1 ะผะผ', weight: '< 1 ะณ' },
  8: { size: 'ัะฐัะพะปะธะฝะบะฐ', emoji: '๐ซ', length: '1.6 ัะผ', weight: '1 ะณ' },
  12: { size: 'ะปะฐะนะผ', emoji: '๐', length: '5.4 ัะผ', weight: '14 ะณ' },
  16: { size: 'ะฐะฒะพะบะฐะดะพ', emoji: '๐ฅ', length: '11.6 ัะผ', weight: '100 ะณ' },
  20: { size: 'ะฑะฐะฝะฐะฝ', emoji: '๐', length: '16.5 ัะผ', weight: '300 ะณ' },
  24: { size: 'ะบัะบัััะทะฐ', emoji: '๐ฝ', length: '30 ัะผ', weight: '600 ะณ' },
  28: { size: 'ะฑะฐะบะปะฐะถะฐะฝ', emoji: '๐', length: '37 ัะผ', weight: '1 ะบะณ' },
  32: { size: 'ะฟะตะบะธะฝัะบะฐั ะบะฐะฟัััะฐ', emoji: '๐ฅฌ', length: '42 ัะผ', weight: '1.7 ะบะณ' },
  36: { size: 'ะฟะฐะฟะฐะนั', emoji: '๐ฅญ', length: '47 ัะผ', weight: '2.6 ะบะณ' },
  40: { size: 'ะฐัะฑัะท', emoji: '๐', length: '51 ัะผ', weight: '3.4 ะบะณ' },
}

// ะะปััะตะฒัะต ัะพะฑััะธั
const milestones = [
  { week: 8, title: 'ะกะตัะดัะตะฑะธะตะฝะธะต', icon: Heart, description: 'ะะพะถะฝะพ ััะปััะฐัั ะฝะฐ ะฃะะ' },
  { week: 12, title: 'ะะตัะฒัะน ัะบัะธะฝะธะฝะณ', icon: Stethoscope, description: 'ะฃะะ + ะฐะฝะฐะปะธะท ะบัะพะฒะธ' },
  { week: 16, title: 'ะะฟัะตะดะตะปะตะฝะธะต ะฟะพะปะฐ', icon: Baby, description: 'ะะพะถะฝะพ ัะทะฝะฐัั ะฝะฐ ะฃะะ' },
  { week: 20, title: 'ะกะตัะตะดะธะฝะฐ ะฟััะธ!', icon: Calendar, description: 'ะัะพัะพะน ัะบัะธะฝะธะฝะณ' },
  { week: 30, title: 'ะะตะบัะตัะฝัะน ะพัะฟััะบ', icon: Briefcase, description: 'ะะพะถะฝะพ ะพัะพัะผะธัั' },
  { week: 37, title: 'ะะพะฝะพัะตะฝะฝะฐั ะฑะตัะตะผะตะฝะฝะพััั', icon: Baby, description: 'ะะฐะปัั ะณะพัะพะฒ ะบ ัะพะถะดะตะฝะธั' },
]

export function PregnancyCalendar({ 
  dueDate, 
  lastPeriod, 
  currentWeek, 
  currentDay 
}: PregnancyCalendarProps) {
  const totalDays = 280 // 40 ะฝะตะดะตะปั
  const daysPassed = currentWeek * 7 + currentDay
  const daysLeft = totalDays - daysPassed
  const progress = (daysPassed / totalDays) * 100
  
  // ะะฟัะตะดะตะปัะตะผ ััะธะผะตััั
  const trimester = currentWeek < 13 ? 1 : currentWeek < 27 ? 2 : 3
  
  // ะะฐัะพะดะธะผ ะฑะปะธะถะฐะนัะธะน ัะฐะทะผะตั ะฟะปะพะดะฐ
  const nearestWeek = Object.keys(fetusSizeByWeek)
    .map(Number)
    .reduce((prev, curr) => 
      Math.abs(curr - currentWeek) < Math.abs(prev - currentWeek) ? curr : prev
    )
  const fetusSize = fetusSizeByWeek[nearestWeek]
  
  // ะะปะธะถะฐะนัะตะต ัะพะฑััะธะต
  const nextMilestone = milestones.find(m => m.week > currentWeek)
  const passedMilestones = milestones.filter(m => m.week <= currentWeek)
  
  return (
    <div className="space-y-6">
      
      {/* ะัะฝะพะฒะฝะฐั ะธะฝัะพัะผะฐัะธั */}
      <Card>
        <CardContent className="pt-6">
          <div className="text-center mb-6">
            <div className="text-6xl mb-2">{fetusSize.emoji}</div>
            <p className="text-lg">
              ะะฐะทะผะตั ะผะฐะปััะฐ: <span className="font-bold">{fetusSize.size}</span>
            </p>
            <p className="text-sm text-muted-foreground">
              ะะปะธะฝะฐ ~{fetusSize.length}, ะฒะตั ~{fetusSize.weight}
            </p>
          </div>
          
          <div className="grid grid-cols-3 gap-4 text-center mb-6">
            <div>
              <div className="text-3xl font-bold text-primary">{currentWeek}</div>
              <div className="text-xs text-muted-foreground">ะฝะตะดะตะปั</div>
            </div>
            <div>
              <div className="text-3xl font-bold">{trimester}</div>
              <div className="text-xs text-muted-foreground">ััะธะผะตััั</div>
            </div>
            <div>
              <div className="text-3xl font-bold text-primary">{daysLeft}</div>
              <div className="text-xs text-muted-foreground">ะดะฝะตะน ะดะพ ะะะ</div>
            </div>
          </div>
          
          {/* ะัะพะณัะตัั-ะฑะฐั */}
          <div className="space-y-2">
            <div className="flex justify-between text-sm">
              <span>ะัะพะณัะตัั ะฑะตัะตะผะตะฝะฝะพััะธ</span>
              <span className="font-medium">{progress.toFixed(0)}%</span>
            </div>
            <Progress value={progress} className="h-3" />
            <div className="flex justify-between text-xs text-muted-foreground">
              <span>ะะฐัะฐัะธะต</span>
              <span>ะะะ: {dueDate.toLocaleDateString('ru-RU')}</span>
            </div>
          </div>
        </CardContent>
      </Card>
      
      {/* ะะปะธะถะฐะนัะตะต ัะพะฑััะธะต */}
      {nextMilestone && (
        <Card className="border-primary">
          <CardHeader className="pb-2">
            <CardTitle className="text-base flex items-center gap-2">
              <nextMilestone.icon className="w-5 h-5 text-primary" />
              ะกะบะพัะพ: {nextMilestone.title}
            </CardTitle>
          </CardHeader>
          <CardContent>
            <p className="text-sm text-muted-foreground mb-2">
              {nextMilestone.description}
            </p>
            <Badge variant="secondary">
              ะงะตัะตะท {nextMilestone.week - currentWeek} ะฝะตะด.
            </Badge>
          </CardContent>
        </Card>
      )}
      
      {/* ะขะฐะนะผะปะฐะนะฝ */}
      <Card>
        <CardHeader>
          <CardTitle className="text-base">ะะฐั ะฟััั</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="space-y-4">
            {milestones.map((milestone, index) => {
              const isPassed = milestone.week <= currentWeek
              const isCurrent = milestone.week === nextMilestone?.week
              
              return (
                <div 
                  key={milestone.week}
                  className={`flex gap-4 ${isPassed ? '' : 'opacity-50'}`}
                >
                  {/* ะะธะฝะธั ะธ ัะพัะบะฐ */}
                  <div className="flex flex-col items-center">
                    <div className={`w-3 h-3 rounded-full ${
                      isPassed ? 'bg-primary' : 'bg-muted'
                    } ${isCurrent ? 'ring-4 ring-primary/20' : ''}`} />
                    {index < milestones.length - 1 && (
                      <div className={`w-0.5 h-full ${
                        isPassed ? 'bg-primary' : 'bg-muted'
                      }`} />
                    )}
                  </div>
                  
                  {/* ะะพะฝัะตะฝั */}
                  <div className="pb-4">
                    <div className="flex items-center gap-2">
                      <span className="font-medium">{milestone.title}</span>
                      <Badge variant="outline" className="text-xs">
                        {milestone.week} ะฝะตะด.
                      </Badge>
                      {isPassed && (
                        <Badge variant="secondary" className="text-xs">โ</Badge>
                      )}
                    </div>
                    <p className="text-sm text-muted-foreground">
                      {milestone.description}
                    </p>
                  </div>
                </div>
              )
            })}
          </div>
        </CardContent>
      </Card>
      
      {/* ะะปััะตะฒัะต ะดะฐัั */}
      <Card>
        <CardHeader>
          <CardTitle className="text-base flex items-center gap-2">
            <Calendar className="w-5 h-5" />
            ะะฐะถะฝัะต ะดะฐัั
          </CardTitle>
        </CardHeader>
        <CardContent>
          <div className="space-y-3 text-sm">
            <div className="flex justify-between">
              <span className="text-muted-foreground">ะะตัะฒัะน ะดะตะฝั ะฟะพัะปะตะดะฝะธั ะผะตัััะฝัั</span>
              <span className="font-medium">
                {lastPeriod.toLocaleDateString('ru-RU')}
              </span>
            </div>
            <div className="flex justify-between">
              <span className="text-muted-foreground">ะัะตะดะฟะพะปะฐะณะฐะตะผะฐั ะดะฐัะฐ ะทะฐัะฐัะธั</span>
              <span className="font-medium">
                {new Date(lastPeriod.getTime() + 14 * 24 * 60 * 60 * 1000).toLocaleDateString('ru-RU')}
              </span>
            </div>
            <div className="flex justify-between">
              <span className="text-muted-foreground">ะะพะฝะตั 1 ััะธะผะตัััะฐ</span>
              <span className="font-medium">
                {new Date(lastPeriod.getTime() + 13 * 7 * 24 * 60 * 60 * 1000).toLocaleDateString('ru-RU')}
              </span>
            </div>
            <div className="flex justify-between">
              <span className="text-muted-foreground">ะะตะบัะตัะฝัะน ะพัะฟััะบ (30 ะฝะตะด.)</span>
              <span className="font-medium">
                {new Date(lastPeriod.getTime() + 30 * 7 * 24 * 60 * 60 * 1000).toLocaleDateString('ru-RU')}
              </span>
            </div>
            <div className="flex justify-between border-t pt-3">
              <span className="text-muted-foreground">ะัะตะดะฟะพะปะฐะณะฐะตะผะฐั ะดะฐัะฐ ัะพะดะพะฒ</span>
              <span className="font-bold text-primary">
                {dueDate.toLocaleDateString('ru-RU')}
              </span>
            </div>
          </div>
        </CardContent>
      </Card>
      
    </div>
  )
}
```

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
src/
โโโ app/
โ   โโโ layout.tsx              # ะะพัะฝะตะฒะพะน layout
โ   โโโ page.tsx                # ะะปะฐะฒะฝะฐั ัััะฐะฝะธัะฐ
โ   โโโ globals.css             # ะะปะพะฑะฐะปัะฝัะต ััะธะปะธ
โ   โ
โ   โโโ pitanie/                # ะะฐะทะดะตะป: ะะธัะฐะฝะธะต
โ   โ   โโโ page.tsx            # ะฅะฐะฑ ัะฐะทะดะตะปะฐ
โ   โ   โโโ kalkulyator-kalorij/
โ   โ   โ   โโโ page.tsx
โ   โ   โโโ kalkulyator-bzhu/
โ   โ   โ   โโโ page.tsx
โ   โ   โโโ defitsit-kalorij/
โ   โ   โ   โโโ page.tsx
โ   โ   โโโ norma-vody/
โ   โ       โโโ page.tsx
โ   โ
โ   โโโ telo/                   # ะะฐะทะดะตะป: ะขะตะปะพ
โ   โ   โโโ page.tsx
โ   โ   โโโ kalkulyator-imt/
โ   โ   โโโ idealnyj-ves/
โ   โ   โโโ protsent-zhira/
โ   โ   โโโ bazovyj-metabolizm/
โ   โ   โโโ tip-teloslozheniya/
โ   โ
โ   โโโ beremennost/            # ะะฐะทะดะตะป: ะะตัะตะผะตะฝะฝะพััั
โ   โ   โโโ page.tsx
โ   โ   โโโ data-rodov/
โ   โ   โโโ srok-beremennosti/
โ   โ   โโโ ovulyatsiya/
โ   โ   โโโ menstrualnyj-tsikl/
โ   โ   โโโ nabor-vesa/
โ   โ
โ   โโโ deti/                   # ะะฐะทะดะตะป: ะะตัะธ
โ   โ   โโโ page.tsx
โ   โ   โโโ rost-rebenka/
โ   โ   โโโ ves-rebenka/
โ   โ
โ   โโโ sport/                  # ะะฐะทะดะตะป: ะกะฟะพัั
โ       โโโ page.tsx
โ       โโโ puls-dlya-trenirovok/
โ       โโโ belok-dlya-sportsmenov/
โ
โโโ components/
โ   โโโ ui/                     # shadcn/ui ะบะพะผะฟะพะฝะตะฝัั
โ   โ
โ   โโโ calculators/            # ะะพะผะฟะพะฝะตะฝัั ะบะฐะปัะบัะปััะพัะพะฒ
โ   โ   โโโ CalorieCalculator.tsx
โ   โ   โโโ BMICalculator.tsx
โ   โ   โโโ MacroCalculator.tsx
โ   โ   โโโ ...
โ   โ
โ   โโโ layout/                 # Layout ะบะพะผะฟะพะฝะตะฝัั
โ   โ   โโโ Header.tsx
โ   โ   โโโ Footer.tsx
โ   โ   โโโ Breadcrumbs.tsx
โ   โ   โโโ AdBlock.tsx
โ   โ
โ   โโโ results/                # ะะพะผะฟะพะฝะตะฝัั ัะตะทัะปััะฐัะพะฒ (ะะะฎะงะะะะ!)
โ   โ   โโโ ResultCard.tsx      # ะะฐััะพัะบะฐ ัะตะทัะปััะฐัะฐ
โ   โ   โโโ ResultScale.tsx     # ะะธะทัะฐะปัะฝะฐั ัะบะฐะปะฐ
โ   โ   โโโ ResultChart.tsx     # ะัะฐัะธะบ
โ   โ   โโโ MacroBreakdown.tsx  # ะะฐะทะฑะธะฒะบะฐ ะะะฃ
โ   โ   โโโ ComparisonTable.tsx # ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป
โ   โ
โ   โโโ inputs/                 # ะฃะปัััะตะฝะฝัะต ะธะฝะฟััั
โ   โ   โโโ AgeSlider.tsx       # ะกะปะฐะนะดะตั ะฒะพะทัะฐััะฐ
โ   โ   โโโ WeightSlider.tsx    # ะกะปะฐะนะดะตั ะฒะตัะฐ
โ   โ   โโโ HeightSlider.tsx    # ะกะปะฐะนะดะตั ัะพััะฐ
โ   โ   โโโ GenderToggle.tsx    # ะะตัะตะบะปััะฐัะตะปั ะฟะพะปะฐ
โ   โ   โโโ ActivitySelector.tsx # ะัะฑะพั ะฐะบัะธะฒะฝะพััะธ
โ   โ
โ   โโโ seo/                    # SEO ะบะพะผะฟะพะฝะตะฝัั
โ       โโโ JsonLd.tsx
โ       โโโ FAQ.tsx
โ       โโโ RelatedCalculators.tsx
โ
โโโ lib/
โ   โโโ calculations/           # ะะกะ ัะพัะผัะปั ัะฐััััะพะฒ
โ   โ   โโโ calories.ts         # ะะฐะปะพัะธะธ (6 ัะพัะผัะป)
โ   โ   โโโ bmi.ts              # ะะะข
โ   โ   โโโ ideal-weight.ts     # ะะดะตะฐะปัะฝัะน ะฒะตั (5 ัะพัะผัะป)
โ   โ   โโโ body-fat.ts         # ะัะพัะตะฝั ะถะธัะฐ
โ   โ   โโโ pregnancy.ts        # ะะตัะตะผะตะฝะฝะพััั
โ   โ   โโโ ovulation.ts        # ะะฒัะปััะธั
โ   โ   โโโ index.ts            # ะญะบัะฟะพัั ะฒัะตะณะพ
โ   โ
โ   โโโ constants/              # ะะพะฝััะฐะฝัั
โ   โ   โโโ activity-levels.ts  # ะฃัะพะฒะฝะธ ะฐะบัะธะฒะฝะพััะธ
โ   โ   โโโ bmi-categories.ts   # ะะฐัะตะณะพัะธะธ ะะะข
โ   โ   โโโ diet-types.ts       # ะขะธะฟั ะดะธะตั
โ   โ   โโโ index.ts
โ   โ
โ   โโโ validations/            # Zod ััะตะผั
โ   โ   โโโ calorie-schema.ts
โ   โ   โโโ bmi-schema.ts
โ   โ   โโโ index.ts
โ   โ
โ   โโโ utils/                  # ะฃัะธะปะธัั
โ       โโโ format.ts           # ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะธัะตะป
โ       โโโ storage.ts          # localStorage
โ       โโโ share.ts            # ะจะตัะธะฝะณ ัะตะทัะปััะฐัะพะฒ
โ
โโโ hooks/                      # ะะฐััะพะผะฝัะต ััะบะธ
โ   โโโ useCalculator.ts        # ะะฑัะธะน ััะบ ะดะปั ะบะฐะปัะบัะปััะพัะพะฒ
โ   โโโ useLocalStorage.ts      # ะกะพััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั
โ   โโโ useDebounce.ts          # ะะตะฑะฐัะฝั ะดะปั ัะตะฐะปัะฐะนะผ ัะฐััััะฐ
โ
โโโ types/
    โโโ calculator.ts           # TypeScript ัะธะฟั
```

---

## ๐จ ะะะะขะะงะะกะะ ะะะะะ: UI/UX ััะตะฑะพะฒะฐะฝะธั

### ะัะธะฝัะธะฟ #1: ะกะพะฒัะตะผะตะฝะฝัะน ะดะธะทะฐะนะฝ (ะะ ะบะฐะบ ั beregifiguru!)

```tsx
// โ ะะะะะะฉะะะ (ะบะฐะบ ั ะบะพะฝะบััะตะฝัะพะฒ):
<div style={{background: '#f5f5f5', border: '1px solid #ccc'}}>
  <label>ะะฐั ะฒะตั:</label>
  <input type="text" />
  <button>ะะฐัััะธัะฐัั</button>
  <p>ะะตะทัะปััะฐั: 2150 ะบะบะฐะป</p>
</div>

// โ ะะะะะะะฌะะ (ะฝะฐั ััะฐะฝะดะฐัั):
<Card className="p-6 shadow-lg border-0 bg-gradient-to-br from-white to-slate-50">
  <div className="space-y-6">
    <GenderToggle value={gender} onChange={setGender} />
    <WeightSlider value={weight} onChange={setWeight} />
    <HeightSlider value={height} onChange={setHeight} />
    <ActivitySelector value={activity} onChange={setActivity} />
  </div>
  
  <ResultCard 
    value={calories}
    unit="ะบะบะฐะป"
    status="normal"
    showScale={true}
  />
</Card>
```

### ะัะธะฝัะธะฟ #2: ะะฐัััั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ (ะะะ ะบะฝะพะฟะบะธ!)

```tsx
// โ ะะะะะะฉะะะ (ะบะฐะบ ั ะฒัะตั ะบะพะฝะบััะตะฝัะพะฒ):
const handleSubmit = () => {
  const result = calculate(values);
  setResult(result);
};
<button onClick={handleSubmit}>ะะฐัััะธัะฐัั</button>

// โ ะะะะะะะฌะะ (ะฝะฐัะต ะฟัะตะธะผััะตััะฒะพ):
// ะะตะทัะปััะฐั ะฟะตัะตััะธััะฒะฐะตััั ะฟัะธ ะบะฐะถะดะพะผ ะธะทะผะตะฝะตะฝะธะธ
useEffect(() => {
  const result = calculate(values);
  setResult(result);
}, [values]);

// ะัะฟะพะปัะทัะตะผ debounce ะดะปั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
const debouncedValues = useDebounce(values, 150);
```

### ะัะธะฝัะธะฟ #3: ะกะปะฐะนะดะตัั ะฒะผะตััะพ ะฟะพะปะตะน ะฒะฒะพะดะฐ

```tsx
// โ ะะะะะะฉะะะ (ะบะฐะบ ั ะฒัะตั):
<Input type="number" placeholder="ะะฒะตะดะธัะต ะฒะตั" />

// โ ะะะะะะะฌะะ (ะฝะฐัะต ะฟัะตะธะผััะตััะฒะพ):
<div className="space-y-2">
  <div className="flex justify-between">
    <Label>ะะตั</Label>
    <span className="text-2xl font-bold text-primary">{weight} ะบะณ</span>
  </div>
  <Slider
    value={[weight]}
    onValueChange={([v]) => setWeight(v)}
    min={30}
    max={200}
    step={1}
    className="py-4"
  />
  <div className="flex justify-between text-xs text-muted-foreground">
    <span>30 ะบะณ</span>
    <span>200 ะบะณ</span>
  </div>
</div>
```

### ะัะธะฝัะธะฟ #4: ะะธะทัะฐะปะธะทะฐัะธั ัะตะทัะปััะฐัะพะฒ (ะะะฎะงะะะะ ะพัะปะธัะธะต!)

```tsx
// โ ะะะะะะฉะะะ (ัะบััะฝะพ, ะบะฐะบ ั ะบะพะฝะบััะตะฝัะพะฒ):
<p>ะะฐั ะะะข: 24.5</p>
<p>ะะฐัะตะณะพัะธั: ะะพัะผะฐ</p>

// โ ะะะะะะะฌะะ (ะฝะฐะณะปัะดะฝะพ):
<ResultScale
  value={24.5}
  ranges={[
    { min: 0, max: 18.5, label: 'ะะตัะธัะธั', color: 'blue' },
    { min: 18.5, max: 25, label: 'ะะพัะผะฐ', color: 'green' },
    { min: 25, max: 30, label: 'ะะทะฑััะพะบ', color: 'yellow' },
    { min: 30, max: 50, label: 'ะะถะธัะตะฝะธะต', color: 'red' },
  ]}
/>

// ะะธะทัะฐะปัะฝะพ ััะพ ะฒัะณะปัะดะธั ัะฐะบ:
// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
// โ  ะะตัะธัะธั โ   ะะะะะ   โ ะะทะฑััะพะบ โ ะะถะธัะตะฝะธะต โ
// โ  โโโโโโโโโผโโโโโโโโโโโโผโโโโโโโโโโผโโโโโโโโโ โ
// โ   <18.5  โ  18.5-25  โ  25-30  โ   >30    โ
// โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะัะธะฝัะธะฟ #5: ะะฝะธะผะฐัะธะธ (ะถะธะฒะพะน ะธะฝัะตััะตะนั)

```tsx
import { motion, AnimatePresence } from 'framer-motion';

// ะะฝะธะผะฐัะธั ะฟะพัะฒะปะตะฝะธั ัะตะทัะปััะฐัะฐ
<AnimatePresence>
  {result && (
    <motion.div
      initial={{ opacity: 0, y: 20 }}
      animate={{ opacity: 1, y: 0 }}
      exit={{ opacity: 0, y: -20 }}
      transition={{ duration: 0.3 }}
    >
      <ResultCard value={result} />
    </motion.div>
  )}
</AnimatePresence>

// ะะฝะธะผะฐัะธั ัะธัะปะฐ (ัััััะธะบ)
<motion.span
  key={value}
  initial={{ opacity: 0, y: 10 }}
  animate={{ opacity: 1, y: 0 }}
>
  {value.toLocaleString('ru-RU')}
</motion.span>
```

---

## ๐ ะะพะผะฟะพะฝะตะฝัั ัะตะทัะปััะฐัะพะฒ (ัะพ, ััะพ ะดะตะปะฐะตั ะฝะฐั ะปัััะต ะบะพะฝะบััะตะฝัะพะฒ)

### ResultCard โ ะะฐััะพัะบะฐ ัะตะทัะปััะฐัะฐ

```tsx
// components/results/ResultCard.tsx
'use client';

import { motion } from 'framer-motion';
import { cn } from '@/lib/utils';

interface ResultCardProps {
  title: string;
  value: number;
  unit: string;
  description?: string;
  status?: 'success' | 'warning' | 'danger' | 'info';
  icon?: React.ReactNode;
}

const statusColors = {
  success: 'bg-green-50 border-green-200 text-green-700',
  warning: 'bg-yellow-50 border-yellow-200 text-yellow-700',
  danger: 'bg-red-50 border-red-200 text-red-700',
  info: 'bg-blue-50 border-blue-200 text-blue-700',
};

export function ResultCard({ 
  title, 
  value, 
  unit, 
  description, 
  status = 'info', 
  icon 
}: ResultCardProps) {
  return (
    <motion.div
      initial={{ opacity: 0, scale: 0.95 }}
      animate={{ opacity: 1, scale: 1 }}
      className={cn(
        'rounded-xl border-2 p-6 text-center',
        statusColors[status]
      )}
    >
      {icon && <div className="mb-2">{icon}</div>}
      <p className="text-sm font-medium opacity-80">{title}</p>
      <motion.p 
        className="text-4xl font-bold my-2"
        key={value}
        initial={{ scale: 1.1 }}
        animate={{ scale: 1 }}
      >
        {value.toLocaleString('ru-RU')}
        <span className="text-lg ml-1">{unit}</span>
      </motion.p>
      {description && (
        <p className="text-sm opacity-70">{description}</p>
      )}
    </motion.div>
  );
}
```

### ResultScale โ ะะธะทัะฐะปัะฝะฐั ัะบะฐะปะฐ (ะะะะะะ-ะคะะงะ!)

```tsx
// components/results/ResultScale.tsx
'use client';

import { motion } from 'framer-motion';
import { cn } from '@/lib/utils';

interface Range {
  min: number;
  max: number;
  label: string;
  color: 'green' | 'yellow' | 'red' | 'blue' | 'gray';
}

interface ResultScaleProps {
  value: number;
  ranges: Range[];
  showLabels?: boolean;
}

const colorMap = {
  green: 'bg-green-500',
  yellow: 'bg-yellow-500',
  red: 'bg-red-500',
  blue: 'bg-blue-500',
  gray: 'bg-gray-300',
};

export function ResultScale({ value, ranges, showLabels = true }: ResultScaleProps) {
  const totalRange = ranges[ranges.length - 1].max - ranges[0].min;
  const position = ((value - ranges[0].min) / totalRange) * 100;
  const clampedPosition = Math.min(Math.max(position, 2), 98);

  // ะะฟัะตะดะตะปัะตะผ ัะตะบัััั ะบะฐัะตะณะพัะธั
  const currentRange = ranges.find(r => value >= r.min && value < r.max) || ranges[ranges.length - 1];

  return (
    <div className="space-y-3">
      {/* ะขะตะบััะตะต ะทะฝะฐัะตะฝะธะต */}
      <div className="text-center">
        <span className="text-3xl font-bold">{value.toFixed(1)}</span>
        <span className={cn(
          'ml-2 px-2 py-1 rounded text-sm font-medium',
          `bg-${currentRange.color}-100 text-${currentRange.color}-700`
        )}>
          {currentRange.label}
        </span>
      </div>

      {/* ะจะบะฐะปะฐ */}
      <div className="relative h-4 rounded-full overflow-hidden flex">
        {ranges.map((range, i) => (
          <div
            key={i}
            className={cn(colorMap[range.color], 'h-full')}
            style={{ width: `${((range.max - range.min) / totalRange) * 100}%` }}
          />
        ))}
        
        {/* ะะฐัะบะตั ัะตะบััะตะณะพ ะทะฝะฐัะตะฝะธั */}
        <motion.div
          className="absolute top-1/2 -translate-y-1/2 w-5 h-5 bg-white border-3 border-gray-800 rounded-full shadow-lg z-10"
          initial={{ left: '0%' }}
          animate={{ left: `${clampedPosition}%` }}
          transition={{ type: 'spring', stiffness: 100, damping: 15 }}
          style={{ marginLeft: '-10px' }}
        />
      </div>
      
      {/* ะะพะดะฟะธัะธ ะบะฐัะตะณะพัะธะน */}
      {showLabels && (
        <div className="flex text-xs">
          {ranges.map((range, i) => (
            <div 
              key={i} 
              className="text-center text-muted-foreground"
              style={{ width: `${((range.max - range.min) / totalRange) * 100}%` }}
            >
              {range.label}
            </div>
          ))}
        </div>
      )}
      
      {/* ะะฝะฐัะตะฝะธั ะณัะฐะฝะธั */}
      <div className="flex justify-between text-xs text-muted-foreground">
        {ranges.map((range, i) => (
          <span key={i}>{range.min}</span>
        ))}
        <span>{ranges[ranges.length - 1].max}</span>
      </div>
    </div>
  );
}
```

### MacroBreakdown โ ะะฐะทะฑะธะฒะบะฐ ะะะฃ

```tsx
// components/results/MacroBreakdown.tsx
'use client';

import { motion } from 'framer-motion';
import { cn } from '@/lib/utils';

interface MacroBreakdownProps {
  protein: number;  // ะณัะฐะผะผั
  fat: number;
  carbs: number;
}

export function MacroBreakdown({ protein, fat, carbs }: MacroBreakdownProps) {
  const proteinCal = protein * 4;
  const fatCal = fat * 9;
  const carbsCal = carbs * 4;
  const total = proteinCal + fatCal + carbsCal;
  
  const data = [
    { 
      name: 'ะะตะปะบะธ', 
      value: protein, 
      percent: (proteinCal / total) * 100, 
      color: 'bg-red-500',
      bgColor: 'bg-red-100',
      emoji: '๐ฅฉ'
    },
    { 
      name: 'ะะธัั', 
      value: fat, 
      percent: (fatCal / total) * 100, 
      color: 'bg-yellow-500',
      bgColor: 'bg-yellow-100',
      emoji: '๐ฅ'
    },
    { 
      name: 'ะฃะณะปะตะฒะพะดั', 
      value: carbs, 
      percent: (carbsCal / total) * 100, 
      color: 'bg-blue-500',
      bgColor: 'bg-blue-100',
      emoji: '๐'
    },
  ];

  return (
    <div className="space-y-4">
      {data.map((macro, index) => (
        <motion.div 
          key={macro.name} 
          className="space-y-2"
          initial={{ opacity: 0, x: -20 }}
          animate={{ opacity: 1, x: 0 }}
          transition={{ delay: index * 0.1 }}
        >
          <div className="flex justify-between items-center">
            <span className="font-medium flex items-center gap-2">
              <span>{macro.emoji}</span>
              {macro.name}
            </span>
            <span>
              <strong className="text-lg">{macro.value} ะณ</strong>
              <span className="text-muted-foreground ml-2">
                ({macro.percent.toFixed(0)}%)
              </span>
            </span>
          </div>
          <div className={cn('h-4 rounded-full overflow-hidden', macro.bgColor)}>
            <motion.div
              className={cn('h-full rounded-full', macro.color)}
              initial={{ width: 0 }}
              animate={{ width: `${macro.percent}%` }}
              transition={{ duration: 0.5, delay: 0.2 + index * 0.1 }}
            />
          </div>
        </motion.div>
      ))}
    </div>
  );
}
```

### FormulaComparison โ ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป (ัะฝะธะบะฐะปัะฝะฐั ัะธัะฐ!)

```tsx
// components/results/FormulaComparison.tsx
'use client';

import { motion } from 'framer-motion';
import { Calculator, CheckCircle } from 'lucide-react';
import { Card } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { cn } from '@/lib/utils';

interface FormulaResult {
  name: string;
  value: number;
  recommended?: boolean;
}

interface FormulaComparisonProps {
  results: FormulaResult[];
  unit: string;
}

export function FormulaComparison({ results, unit }: FormulaComparisonProps) {
  const min = Math.min(...results.map(r => r.value));
  const max = Math.max(...results.map(r => r.value));
  const avg = results.reduce((a, b) => a + b.value, 0) / results.length;
  const range = max - min;

  return (
    <Card className="p-5">
      <h4 className="font-semibold mb-4 flex items-center gap-2">
        <Calculator className="w-5 h-5 text-primary" />
        ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป ัะฐััััะฐ
      </h4>
      
      <div className="space-y-3">
        {results.map((result, index) => {
          const barWidth = range === 0 ? 50 : ((result.value - min) / range) * 60 + 20;
          
          return (
            <motion.div 
              key={result.name} 
              className="flex items-center gap-3"
              initial={{ opacity: 0, x: -10 }}
              animate={{ opacity: 1, x: 0 }}
              transition={{ delay: index * 0.05 }}
            >
              <div className="w-40 text-sm flex items-center gap-1">
                {result.recommended && (
                  <CheckCircle className="w-4 h-4 text-green-500 flex-shrink-0" />
                )}
                <span className={cn(
                  'truncate',
                  result.recommended && 'font-medium'
                )}>
                  {result.name}
                </span>
              </div>
              <div className="flex-1 h-7 bg-gray-100 rounded-lg relative overflow-hidden">
                <motion.div
                  className={cn(
                    'h-full rounded-lg',
                    result.recommended ? 'bg-primary' : 'bg-gray-400'
                  )}
                  initial={{ width: 0 }}
                  animate={{ width: `${barWidth}%` }}
                  transition={{ duration: 0.4, delay: index * 0.05 }}
                />
                <span className="absolute right-2 top-1/2 -translate-y-1/2 text-sm font-medium">
                  {result.value.toLocaleString('ru-RU')} {unit}
                </span>
              </div>
            </motion.div>
          );
        })}
      </div>
      
      <div className="mt-4 pt-4 border-t grid grid-cols-3 gap-4 text-center text-sm">
        <div>
          <p className="text-muted-foreground">ะะธะฝะธะผัะผ</p>
          <p className="font-semibold">{min.toLocaleString('ru-RU')} {unit}</p>
        </div>
        <div className="border-x">
          <p className="text-muted-foreground">ะกัะตะดะฝะตะต</p>
          <p className="font-semibold text-primary">{Math.round(avg).toLocaleString('ru-RU')} {unit}</p>
        </div>
        <div>
          <p className="text-muted-foreground">ะะฐะบัะธะผัะผ</p>
          <p className="font-semibold">{max.toLocaleString('ru-RU')} {unit}</p>
        </div>
      </div>
    </Card>
  );
}
```

---

## ๐ ะะพะผะฟะพะฝะตะฝัั ะฒะฒะพะดะฐ

### GenderToggle โ ะะตัะตะบะปััะฐัะตะปั ะฟะพะปะฐ

```tsx
// components/inputs/GenderToggle.tsx
'use client';

import { User } from 'lucide-react';
import { cn } from '@/lib/utils';

interface GenderToggleProps {
  value: 'male' | 'female';
  onChange: (value: 'male' | 'female') => void;
}

export function GenderToggle({ value, onChange }: GenderToggleProps) {
  return (
    <div className="flex gap-2 p-1 bg-gray-100 rounded-xl">
      <button
        type="button"
        onClick={() => onChange('male')}
        className={cn(
          'flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg transition-all duration-200',
          value === 'male' 
            ? 'bg-white shadow-md text-blue-600 font-medium' 
            : 'text-gray-500 hover:text-gray-700'
        )}
      >
        <span className="text-xl">๐จ</span>
        ะัะถัะธะฝะฐ
      </button>
      <button
        type="button"
        onClick={() => onChange('female')}
        className={cn(
          'flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-lg transition-all duration-200',
          value === 'female' 
            ? 'bg-white shadow-md text-pink-600 font-medium' 
            : 'text-gray-500 hover:text-gray-700'
        )}
      >
        <span className="text-xl">๐ฉ</span>
        ะะตะฝัะธะฝะฐ
      </button>
    </div>
  );
}
```

### ActivitySelector โ ะัะฑะพั ะฐะบัะธะฒะฝะพััะธ

```tsx
// components/inputs/ActivitySelector.tsx
'use client';

import { Label } from '@/components/ui/label';
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';
import { cn } from '@/lib/utils';

const ACTIVITY_LEVELS = [
  { 
    id: 'sedentary', 
    label: 'ะะธะฝะธะผะฐะปัะฝะฐั', 
    emoji: '๐ช', 
    description: 'ะกะธะดััะฐั ัะฐะฑะพัะฐ, ะฑะตะท ััะตะฝะธัะพะฒะพะบ', 
    factor: 1.2 
  },
  { 
    id: 'light', 
    label: 'ะัะณะบะฐั', 
    emoji: '๐ถ', 
    description: '1-2 ััะตะฝะธัะพะฒะบะธ ะฒ ะฝะตะดะตะปั', 
    factor: 1.375 
  },
  { 
    id: 'moderate', 
    label: 'ะกัะตะดะฝัั', 
    emoji: '๐', 
    description: '3-5 ััะตะฝะธัะพะฒะพะบ ะฒ ะฝะตะดะตะปั', 
    factor: 1.55 
  },
  { 
    id: 'active', 
    label: 'ะััะพะบะฐั', 
    emoji: '๐ช', 
    description: '6-7 ััะตะฝะธัะพะฒะพะบ ะฒ ะฝะตะดะตะปั', 
    factor: 1.725 
  },
  { 
    id: 'extreme', 
    label: 'ะัะตะฝั ะฒััะพะบะฐั', 
    emoji: '๐๏ธ', 
    description: 'ะัะพัะตััะธะพะฝะฐะปัะฝัะน ัะฟะพัั / ัะธะท. ัะฐะฑะพัะฐ', 
    factor: 1.9 
  },
];

interface ActivitySelectorProps {
  value: string;
  onChange: (value: string) => void;
}

export function ActivitySelector({ value, onChange }: ActivitySelectorProps) {
  return (
    <div className="space-y-3">
      <Label>ะฃัะพะฒะตะฝั ัะธะทะธัะตัะบะพะน ะฐะบัะธะฒะฝะพััะธ</Label>
      <TooltipProvider>
        <div className="grid grid-cols-5 gap-2">
          {ACTIVITY_LEVELS.map((level) => (
            <Tooltip key={level.id}>
              <TooltipTrigger asChild>
                <button
                  type="button"
                  onClick={() => onChange(level.id)}
                  className={cn(
                    'flex flex-col items-center p-3 rounded-xl border-2 transition-all duration-200',
                    value === level.id
                      ? 'border-primary bg-primary/5 shadow-md'
                      : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'
                  )}
                >
                  <span className="text-2xl mb-1">{level.emoji}</span>
                  <span className={cn(
                    'text-xs text-center',
                    value === level.id ? 'font-medium text-primary' : 'text-gray-600'
                  )}>
                    {level.label}
                  </span>
                </button>
              </TooltipTrigger>
              <TooltipContent side="bottom">
                <p className="font-medium">{level.description}</p>
                <p className="text-xs text-muted-foreground mt-1">
                  ะะพัััะธัะธะตะฝั: ร{level.factor}
                </p>
              </TooltipContent>
            </Tooltip>
          ))}
        </div>
      </TooltipProvider>
    </div>
  );
}
```

### ValueSlider โ ะฃะฝะธะฒะตััะฐะปัะฝัะน ัะปะฐะนะดะตั

```tsx
// components/inputs/ValueSlider.tsx
'use client';

import { Slider } from '@/components/ui/slider';
import { Label } from '@/components/ui/label';
import { cn } from '@/lib/utils';

interface ValueSliderProps {
  label: string;
  value: number;
  onChange: (value: number) => void;
  min: number;
  max: number;
  step?: number;
  unit: string;
  icon?: React.ReactNode;
}

export function ValueSlider({ 
  label, 
  value, 
  onChange, 
  min, 
  max, 
  step = 1, 
  unit,
  icon 
}: ValueSliderProps) {
  return (
    <div className="space-y-3">
      <div className="flex justify-between items-center">
        <Label className="flex items-center gap-2">
          {icon}
          {label}
        </Label>
        <div className="text-right">
          <span className="text-2xl font-bold text-primary">{value}</span>
          <span className="text-muted-foreground ml-1">{unit}</span>
        </div>
      </div>
      
      <Slider
        value={[value]}
        onValueChange={([v]) => onChange(v)}
        min={min}
        max={max}
        step={step}
        className="py-2"
      />
      
      <div className="flex justify-between text-xs text-muted-foreground">
        <span>{min} {unit}</span>
        <span>{max} {unit}</span>
      </div>
    </div>
  );
}
```

---

## ๐ ะคะพัะผัะปั ัะฐััััะพะฒ

### ะะฐะปะพัะธะธ (ะฒัะต 5 ัะพัะผัะป)

```typescript
// lib/calculations/calories.ts

export interface CalorieInput {
  gender: 'male' | 'female';
  age: number;
  weight: number;
  height: number;
  activityFactor: number;
  bodyFat?: number;
}

export interface CalorieResult {
  bmr: number;
  tdee: number;
  deficit: number;
  surplus: number;
}

// 1. ะคะพัะผัะปะฐ ะะธััะปะธะฝะฐ-ะกะฐะฝ ะะตะพัะฐ (ัะตะบะพะผะตะฝะดัะตะผะฐั)
export function mifflinStJeor(input: CalorieInput): CalorieResult {
  const { gender, age, weight, height, activityFactor } = input;
  
  const bmr = gender === 'male'
    ? 10 * weight + 6.25 * height - 5 * age + 5
    : 10 * weight + 6.25 * height - 5 * age - 161;
  
  const tdee = bmr * activityFactor;
  
  return {
    bmr: Math.round(bmr),
    tdee: Math.round(tdee),
    deficit: Math.round(tdee * 0.85),
    surplus: Math.round(tdee * 1.15),
  };
}

// 2. ะคะพัะผัะปะฐ ะฅะฐััะธัะฐ-ะะตะฝะตะดะธะบัะฐ (ะพัะธะณะธะฝะฐะปัะฝะฐั)
export function harrisBenedict(input: CalorieInput): CalorieResult {
  const { gender, age, weight, height, activityFactor } = input;
  
  const bmr = gender === 'male'
    ? 66.5 + 13.75 * weight + 5.003 * height - 6.755 * age
    : 655.1 + 9.563 * weight + 1.850 * height - 4.676 * age;
  
  const tdee = bmr * activityFactor;
  
  return {
    bmr: Math.round(bmr),
    tdee: Math.round(tdee),
    deficit: Math.round(tdee * 0.85),
    surplus: Math.round(tdee * 1.15),
  };
}

// 3. ะคะพัะผัะปะฐ ะฅะฐััะธัะฐ-ะะตะฝะตะดะธะบัะฐ (1984)
export function harrisBenedictRevised(input: CalorieInput): CalorieResult {
  const { gender, age, weight, height, activityFactor } = input;
  
  const bmr = gender === 'male'
    ? 88.362 + 13.397 * weight + 4.799 * height - 5.677 * age
    : 447.593 + 9.247 * weight + 3.098 * height - 4.330 * age;
  
  const tdee = bmr * activityFactor;
  
  return {
    bmr: Math.round(bmr),
    tdee: Math.round(tdee),
    deficit: Math.round(tdee * 0.85),
    surplus: Math.round(tdee * 1.15),
  };
}

// 4. ะคะพัะผัะปะฐ ะะตััะฐ-ะะฐะบะัะดะปะฐ
export function katchMcArdle(input: CalorieInput): CalorieResult {
  const { weight, activityFactor, bodyFat = 20 } = input;
  
  const leanMass = weight * (1 - bodyFat / 100);
  const bmr = 370 + 21.6 * leanMass;
  const tdee = bmr * activityFactor;
  
  return {
    bmr: Math.round(bmr),
    tdee: Math.round(tdee),
    deficit: Math.round(tdee * 0.85),
    surplus: Math.round(tdee * 1.15),
  };
}

// 5. ะคะพัะผัะปะฐ ะะะ
export function whoFormula(input: CalorieInput): CalorieResult {
  const { gender, age, weight, activityFactor } = input;
  
  let bmr: number;
  
  if (gender === 'male') {
    if (age < 30) bmr = 15.3 * weight + 679;
    else if (age < 60) bmr = 11.6 * weight + 879;
    else bmr = 13.5 * weight + 487;
  } else {
    if (age < 30) bmr = 14.7 * weight + 496;
    else if (age < 60) bmr = 8.7 * weight + 829;
    else bmr = 10.5 * weight + 596;
  }
  
  const tdee = bmr * activityFactor;
  
  return {
    bmr: Math.round(bmr),
    tdee: Math.round(tdee),
    deficit: Math.round(tdee * 0.85),
    surplus: Math.round(tdee * 1.15),
  };
}

// ะัะต ัะพัะผัะปั ะดะปั ััะฐะฒะฝะตะฝะธั
export function calculateAllFormulas(input: CalorieInput) {
  return [
    { name: 'ะะธััะปะธะฝะฐ-ะกะฐะฝ ะะตะพัะฐ', ...mifflinStJeor(input), recommended: true },
    { name: 'ะฅะฐััะธัะฐ-ะะตะฝะตะดะธะบัะฐ', ...harrisBenedict(input), recommended: false },
    { name: 'ะฅะฐััะธัะฐ-ะะตะฝะตะดะธะบัะฐ (1984)', ...harrisBenedictRevised(input), recommended: false },
    { name: 'ะะตััะฐ-ะะฐะบะัะดะปะฐ', ...katchMcArdle(input), recommended: false },
    { name: 'ะะะ', ...whoFormula(input), recommended: false },
  ];
}
```

### ะะะข

```typescript
// lib/calculations/bmi.ts

export const BMI_CATEGORIES = [
  { min: 0, max: 16, label: 'ะััะฐะถะตะฝะฝัะน ะดะตัะธัะธั', color: 'blue' as const, status: 'danger' as const },
  { min: 16, max: 18.5, label: 'ะะตัะธัะธั ะผะฐััั', color: 'blue' as const, status: 'warning' as const },
  { min: 18.5, max: 25, label: 'ะะพัะผะฐ', color: 'green' as const, status: 'success' as const },
  { min: 25, max: 30, label: 'ะะทะฑััะพัะฝัะน ะฒะตั', color: 'yellow' as const, status: 'warning' as const },
  { min: 30, max: 35, label: 'ะะถะธัะตะฝะธะต I', color: 'red' as const, status: 'danger' as const },
  { min: 35, max: 40, label: 'ะะถะธัะตะฝะธะต II', color: 'red' as const, status: 'danger' as const },
  { min: 40, max: 60, label: 'ะะถะธัะตะฝะธะต III', color: 'red' as const, status: 'danger' as const },
];

export interface BMIResult {
  value: number;
  category: string;
  status: 'success' | 'warning' | 'danger';
  color: 'green' | 'yellow' | 'red' | 'blue';
  idealWeight: { min: number; max: number };
  recommendation: string;
}

export function calculateBMI(weight: number, height: number): BMIResult {
  const heightM = height / 100;
  const bmi = weight / (heightM * heightM);
  
  const category = BMI_CATEGORIES.find(c => bmi >= c.min && bmi < c.max) || BMI_CATEGORIES[6];
  
  const idealWeight = {
    min: Math.round(18.5 * heightM * heightM),
    max: Math.round(24.9 * heightM * heightM),
  };
  
  let recommendation = '';
  if (bmi < 18.5) {
    const toGain = idealWeight.min - weight;
    recommendation = `ะะตะบะพะผะตะฝะดัะตััั ะฝะฐะฑัะฐัั ${Math.round(toGain)} ะบะณ ะดะพ ะฝะพัะผั`;
  } else if (bmi >= 25) {
    const toLose = weight - idealWeight.max;
    recommendation = `ะะตะบะพะผะตะฝะดัะตััั ัะฑัะพัะธัั ${Math.round(toLose)} ะบะณ ะดะพ ะฝะพัะผั`;
  } else {
    recommendation = 'ะัะปะธัะฝะพ! ะะฐั ะฒะตั ะฒ ะฟัะตะดะตะปะฐั ะฝะพัะผั';
  }
  
  return {
    value: Math.round(bmi * 10) / 10,
    category: category.label,
    status: category.status,
    color: category.color,
    idealWeight,
    recommendation,
  };
}
```

---

## ๐ ะจะฐะฑะปะพะฝ ัััะฐะฝะธัั ะบะฐะปัะบัะปััะพัะฐ

```tsx
// app/pitanie/kalkulyator-kalorij/page.tsx
import { Metadata } from 'next';
import { CalorieCalculator } from '@/components/calculators/CalorieCalculator';
import { Breadcrumbs } from '@/components/layout/Breadcrumbs';
import { AdBlock } from '@/components/layout/AdBlock';
import { FAQ } from '@/components/seo/FAQ';
import { RelatedCalculators } from '@/components/seo/RelatedCalculators';
import { JsonLd } from '@/components/seo/JsonLd';

export const metadata: Metadata = {
  title: 'ะะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน ะพะฝะปะฐะนะฝ โ ัะฐัััั ัััะพัะฝะพะน ะฝะพัะผั ะฑะตัะฟะปะฐัะฝะพ',
  description: 'ะะตัะฟะปะฐัะฝัะน ะบะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน โ ะะฐัััั ะฟะพ 5 ัะพัะผัะปะฐะผ โ ะกัะฐะฒะฝะตะฝะธะต ัะตะทัะปััะฐัะพะฒ โ ะะฐะปะพัะธะธ ะดะปั ะฟะพััะดะตะฝะธั ะธ ะฝะฐะฑะพัะฐ ะผะฐััั โ ะะฐัััั ะะะฃ',
  keywords: ['ะบะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน', 'ัะฐัััั ะบะฐะปะพัะธะน', 'ัััะพัะฝะฐั ะฝะพัะผะฐ ะบะฐะปะพัะธะน', 'ัะบะพะปัะบะพ ะบะฐะปะพัะธะน ะฒ ะดะตะฝั'],
};

const breadcrumbs = [
  { label: 'ะะปะฐะฒะฝะฐั', href: '/' },
  { label: 'ะะธัะฐะฝะธะต', href: '/pitanie' },
  { label: 'ะะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน', href: '/pitanie/kalkulyator-kalorij' },
];

const faqData = [
  {
    question: 'ะะฐะบะฐั ัะพัะผัะปะฐ ัะฐััััะฐ ะบะฐะปะพัะธะน ัะฐะผะฐั ัะพัะฝะฐั?',
    answer: 'ะคะพัะผัะปะฐ ะะธััะปะธะฝะฐ-ะกะฐะฝ ะะตะพัะฐ ััะธัะฐะตััั ะฝะฐะธะฑะพะปะตะต ัะพัะฝะพะน ะดะปั ะฑะพะปััะธะฝััะฒะฐ ะปัะดะตะน ะฟะพ ะดะฐะฝะฝัะผ ะะผะตัะธะบะฐะฝัะบะพะน ะดะธะตัะธัะตัะบะพะน ะฐััะพัะธะฐัะธะธ.',
  },
  {
    question: 'ะกะบะพะปัะบะพ ะบะฐะปะพัะธะน ะฝัะถะฝะพ ะดะปั ะฟะพััะดะตะฝะธั?',
    answer: 'ะะปั ะฑะตะทะพะฟะฐัะฝะพะณะพ ะฟะพััะดะตะฝะธั ัะพะทะดะฐะนัะต ะดะตัะธัะธั 15-20% ะพั ะฝะพัะผั. ะญัะพ ะฟะพะทะฒะพะปะธั ัะตัััั 0.5-1 ะบะณ ะฒ ะฝะตะดะตะปั ะฑะตะท ะฒัะตะดะฐ ะดะปั ะทะดะพัะพะฒัั.',
  },
  {
    question: 'ะัะถะฝะพ ะปะธ ััะธัะฐัั ะบะฐะปะพัะธะธ ะบะฐะถะดัะน ะดะตะฝั?',
    answer: 'ะะฐ ะฝะฐัะฐะปัะฝะพะผ ััะฐะฟะต ัะตะบะพะผะตะฝะดัะตััั ััะธัะฐัั 2-4 ะฝะตะดะตะปะธ, ััะพะฑั ะฟะพะฝััั ัะฐะทะผะตั ะฟะพััะธะน. ะะฐัะตะผ ะผะพะถะฝะพ ะฟะตัะตะนัะธ ะฝะฐ ะธะฝััะธัะธะฒะฝะพะต ะฟะธัะฐะฝะธะต.',
  },
];

const relatedCalculators = [
  { title: 'ะะฐะปัะบัะปััะพั ะะะฃ', href: '/pitanie/kalkulyator-bzhu', description: 'ะะฐัััั ะฑะตะปะบะพะฒ, ะถะธัะพะฒ ะธ ัะณะปะตะฒะพะดะพะฒ' },
  { title: 'ะะฐะปัะบัะปััะพั ะะะข', href: '/telo/kalkulyator-imt', description: 'ะะฝะดะตะบั ะผะฐััั ัะตะปะฐ' },
  { title: 'ะะตัะธัะธั ะบะฐะปะพัะธะน', href: '/pitanie/defitsit-kalorij', description: 'ะะฐัััั ะดะปั ะฟะพััะดะตะฝะธั' },
];

export default function CalorieCalculatorPage() {
  return (
    <>
      <JsonLd type="WebApplication" data={{
        name: 'ะะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน',
        description: 'ะะฝะปะฐะนะฝ ะบะฐะปัะบัะปััะพั ัััะพัะฝะพะน ะฝะพัะผั ะบะฐะปะพัะธะน',
        applicationCategory: 'HealthApplication',
      }} />
      
      <article className="max-w-4xl mx-auto px-4 py-8">
        <Breadcrumbs items={breadcrumbs} />
        
        <header className="mb-8">
          <h1 className="text-3xl md:text-4xl font-bold mb-4">
            ะะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน ะพะฝะปะฐะนะฝ
          </h1>
          <p className="text-lg text-muted-foreground">
            ะะฐัััะธัะฐะนัะต ัััะพัะฝัั ะฝะพัะผั ะบะฐะปะพัะธะน ะฟะพ 5 ะฝะฐััะฝัะผ ัะพัะผัะปะฐะผ. 
            ะะตะทัะปััะฐั ะพะฑะฝะพะฒะปัะตััั ะผะณะฝะพะฒะตะฝะฝะพ ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ ะฟะฐัะฐะผะตััะพะฒ.
          </p>
        </header>
        
        <AdBlock position="top" className="mb-8" />
        
        <section className="mb-12">
          <CalorieCalculator />
        </section>
        
        <AdBlock position="middle" className="my-8" />
        
        <section className="prose prose-lg max-w-none mb-12">
          {/* SEO-ะบะพะฝัะตะฝั 1500+ ัะปะพะฒ */}
          <h2>ะงัะพ ัะฐะบะพะต ะบะฐะปะพัะธะธ</h2>
          <p>ะะฐะปะพัะธั โ ะตะดะธะฝะธัะฐ ะธะทะผะตัะตะฝะธั ัะฝะตัะณะธะธ...</p>
          
          <h2>ะะฐะบ ัะฐะฑะพัะฐะตั ะบะฐะปัะบัะปััะพั</h2>
          <p>ะะฐั ะบะฐะปัะบัะปััะพั ะธัะฟะพะปัะทัะตั 5 ะฝะฐััะฝัั ัะพัะผัะป...</p>
          
          {/* ะัะพะดะพะปะถะตะฝะธะต... */}
        </section>
        
        <FAQ items={faqData} />
        
        <AdBlock position="bottom" className="my-8" />
        
        <RelatedCalculators items={relatedCalculators} />
      </article>
    </>
  );
}
```

---

## โก ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั (ะพะฑัะทะฐัะตะปัะฝะพ!)

### ะฆะตะปั: Lighthouse Performance > 90

```typescript
// next.config.js
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    formats: ['image/avif', 'image/webp'],
  },
  compress: true,
  reactStrictMode: true,
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },
};

module.exports = nextConfig;
```

### Lazy loading

```tsx
import dynamic from 'next/dynamic';

const ResultChart = dynamic(() => import('@/components/results/ResultChart'), {
  loading: () => <div className="h-64 animate-pulse bg-gray-100 rounded" />,
  ssr: false,
});

const AdBlock = dynamic(() => import('@/components/layout/AdBlock'), {
  ssr: false,
});
```

---

## ๐ ะะพััะดะพะบ ัะฐะทัะฐะฑะพัะบะธ

### ะคะฐะทะฐ 1: ะะฝััะฐััััะบัััะฐ (3 ะดะฝั)
1. ะกะพะทะดะฐะฝะธะต ะฟัะพะตะบัะฐ Next.js
2. ะะฐัััะพะนะบะฐ shadcn/ui
3. ะะฐะทะพะฒัะต ะบะพะผะฟะพะฝะตะฝัั (Header, Footer, Breadcrumbs)
4. ะะพะผะฟะพะฝะตะฝัั ะฒะฒะพะดะฐ (GenderToggle, Sliders, ActivitySelector)
5. ะะพะผะฟะพะฝะตะฝัั ัะตะทัะปััะฐัะพะฒ (ResultCard, ResultScale, MacroBreakdown)

### ะคะฐะทะฐ 2: ะะฐะปัะบัะปััะพัั Tier 1 (2 ะฝะตะดะตะปะธ)
1. ะะฐะปัะบัะปััะพั ะบะฐะปะพัะธะน (ั FormulaComparison)
2. ะะฐะปัะบัะปััะพั ะดะฐัั ัะพะดะพะฒ
3. ะะฐะปัะบัะปััะพั ะะะฃ
4. ะะฐะปัะบัะปััะพั ะะะข
5. ะะฐะปัะบัะปััะพั ััะพะบะฐ ะฑะตัะตะผะตะฝะฝะพััะธ

### ะคะฐะทะฐ 3: SEO ะธ ะดะตะฟะปะพะน (1 ะฝะตะดะตะปั)
1. SEO-ัะตะบััั ะดะปั ะฒัะตั ัััะฐะฝะธั
2. JSON-LD ัะฐะทะผะตัะบะฐ
3. sitemap.xml, robots.txt
4. ะะตะฟะปะพะน ะฝะฐ Vercel
5. ะฏะฝะดะตะบั.ะะตะฑะผะฐััะตั + ะะตััะธะบะฐ

---

## โ ะงะตะบ-ะปะธัั ะณะพัะพะฒะฝะพััะธ

```
โก ะกะพะฒัะตะผะตะฝะฝัะน ะดะธะทะฐะนะฝ (shadcn/ui)
โก ะกะปะฐะนะดะตัั ะฒะผะตััะพ ะธะฝะฟััะพะฒ
โก ะะฐัััั ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
โก ะะธะทัะฐะปัะฝะฐั ัะบะฐะปะฐ ัะตะทัะปััะฐัะฐ
โก ะกัะฐะฒะฝะตะฝะธะต ัะพัะผัะป (ะณะดะต ะฟัะธะผะตะฝะธะผะพ)
โก ะะฝะธะผะฐัะธะธ (framer-motion)
โก ะะพะฑะธะปัะฝะฐั ะฐะดะฐะฟัะฐัะธั
โก Metadata (title, description)
โก JSON-LD ัะฐะทะผะตัะบะฐ
โก SEO-ัะตะบัั 1500+ ัะปะพะฒ
โก FAQ ัะฐะทะดะตะป
โก 3 ัะตะบะปะฐะผะฝัั ะฑะปะพะบะฐ
โก Lighthouse > 90
```

---

## ๐ซ ะะ ะดะตะปะฐัั (ะฐะฝัะธะฟะฐััะตัะฝั)

```tsx
// โ ะะฝะพะฟะบะฐ "ะะฐัััะธัะฐัั"
<button onClick={calculate}>ะะฐัััะธัะฐัั</button>

// โ ะะฑััะฝัะต ะธะฝะฟััั
<input type="number" />

// โ ะขะตะบััะพะฒัะน ัะตะทัะปััะฐั
<p>ะะฐั ะะะข: 24.5</p>

// โ ะฃััะฐัะตะฒัะธะน ะดะธะทะฐะนะฝ
<div style={{background: '#eee', border: '1px solid #ccc'}} />

// โ any ะฒ TypeScript
const data: any = ...

// โ ะคะพัะผัะปั ะฒ ะบะพะผะฟะพะฝะตะฝัะฐั
function Calculator() {
  const bmr = 10 * weight + ... // ะะะะะะะะะฌะะ!
}
```

---

*ะะตััะธั 2.0 | ะฏะฝะฒะฐัั 2025 | ะก ััััะพะผ ะบะพะฝะบััะตะฝัะฝะพะณะพ ะฐะฝะฐะปะธะทะฐ*
