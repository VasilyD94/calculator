# 📋 ТЕХНИЧЕСКОЕ ЗАДАНИЕ: Калькуляторы онлайн v2.1

> **Версия:** 2.1 (реалистичные прогнозы + стратегия расширения)  
> **Старт:** Ниша здоровья (25 калькуляторов)  
> **Расширение:** Строительство, финансы, авто (позже)

---

## 🎯 Ключевые отличия от конкурентов

| Аспект | Конкуренты | Наш сайт |
|--------|------------|----------|
| **Дизайн** | Устаревший (2010-2015) | Современный shadcn/ui |
| **Скорость** | 5-10 сек загрузка | < 2 сек (Next.js SSG) |
| **Расчёт** | Кнопка "Рассчитать" | Реальное время |
| **Ввод данных** | Текстовые поля | Слайдеры |
| **Результат** | Сухие цифры | Визуальные шкалы |
| **Сравнение** | Нет или базовое | Сравнение 5+ формул |
| **Регистрация** | Навязывают | Не требуется |

---

## 🛠 Технологический стек

### Frontend
| Технология | Версия | Назначение |
|------------|--------|------------|
| Next.js | 14+ | App Router, SSG |
| TypeScript | 5+ | Типизация |
| Tailwind CSS | 3+ | Стилизация |
| shadcn/ui | latest | UI компоненты |
| Framer Motion | 10+ | Анимации |
| React Hook Form | 7+ | Формы |
| Zod | 3+ | Валидация |
| Recharts | 2+ | Графики |
| date-fns | 3+ | Работа с датами |
| Lucide React | latest | Иконки |

### Инфраструктура
| Сервис | Назначение |
|--------|------------|
| Vercel | Хостинг (бесплатно) |
| GitHub | Репозиторий |
| Яндекс.Метрика | Аналитика |
| Яндекс.Вебмастер | Индексация |
| РСЯ | Монетизация |

---

## 📁 Структура URL (с учётом расширения)

```
ДОМЕН: Выбрать нейтральный (mycalc.ru, calc-box.ru, vsecalc.ru)

/                                        # Главная
│
├── /zdorovye/                           # РАЗДЕЛ: Здоровье (текущий фокус)
│   │
│   ├── /pitanie/                        # Хаб: Питание
│   │   ├── /kalkulyator-kalorij/
│   │   ├── /kalkulyator-bzhu/
│   │   ├── /defitsit-kalorij/
│   │   └── /norma-vody/
│   │
│   ├── /telo/                           # Хаб: Тело
│   │   ├── /kalkulyator-imt/
│   │   ├── /idealnyj-ves/
│   │   ├── /protsent-zhira/
│   │   ├── /bazovyj-metabolizm/
│   │   └── /tip-teloslozheniya/
│   │
│   ├── /beremennost/                    # Хаб: Беременность
│   │   ├── /data-rodov/
│   │   ├── /srok-beremennosti/
│   │   ├── /ovulyatsiya/
│   │   ├── /menstrualnyj-tsikl/
│   │   └── /nabor-vesa/
│   │
│   ├── /deti/                           # Хаб: Дети
│   │   ├── /rost-rebenka/
│   │   └── /ves-rebenka/
│   │
│   └── /sport/                          # Хаб: Спорт
│       ├── /puls-dlya-trenirovok/
│       └── /belok-dlya-sportsmenov/
│
├── /stroitelstvo/                       # РАЗДЕЛ: Строительство (позже, месяц 12+)
│   ├── /kirpich/
│   ├── /beton/
│   ├── /penobloki/
│   └── ...
│
├── /finansy/                            # РАЗДЕЛ: Финансы (позже, месяц 18+)
│   ├── /ipoteka/
│   ├── /kredit/
│   └── ...
│
└── /avto/                               # РАЗДЕЛ: Авто (позже)
    ├── /transportnyj-nalog/
    └── ...
```

### Почему такая структура

```
✅ ПРЕИМУЩЕСТВА:
- Один домен копит траст → новые разделы стартуют быстрее
- Чёткая иерархия → понятно Яндексу и пользователям
- Гибкость → легко добавлять новые разделы
- Экономия → один хостинг, одна админка

⚠️ ВАЖНО:
- Перелинковка внутри раздела (здоровье ↔ здоровье)
- Между разделами — только через главную
- Хлебные крошки: Главная → Здоровье → Питание → Калькулятор калорий
```

---

## 📊 Спецификации калькуляторов

### Tier 1: Приоритетные (запуск в первый месяц)

#### 1. Калькулятор калорий
**Частотность:** 300K+ запросов/мес  
**URL:** `/pitanie/kalkulyator-kalorij/`

**Входные параметры:**
| Параметр | Тип | Компонент | Диапазон |
|----------|-----|-----------|----------|
| Пол | enum | GenderToggle | male/female |
| Возраст | number | Slider | 14-100 лет |
| Рост | number | Slider | 100-250 см |
| Вес | number | Slider | 30-200 кг |
| Активность | enum | ActivitySelector | 5 уровней |
| Цель | enum | GoalSelector | похудение/поддержание/набор |

**Формулы (5 штук для сравнения):**

```typescript
// 1. Миффлина-Сан Жеора (рекомендуемая)
// Мужчины: BMR = 10×вес + 6.25×рост - 5×возраст + 5
// Женщины: BMR = 10×вес + 6.25×рост - 5×возраст - 161

// 2. Харриса-Бенедикта (оригинальная)
// Мужчины: BMR = 66.5 + 13.75×вес + 5.003×рост - 6.755×возраст
// Женщины: BMR = 655.1 + 9.563×вес + 1.850×рост - 4.676×возраст

// 3. Харриса-Бенедикта (1984)
// Мужчины: BMR = 88.362 + 13.397×вес + 4.799×рост - 5.677×возраст
// Женщины: BMR = 447.593 + 9.247×вес + 3.098×рост - 4.330×возраст

// 4. Кетча-МакАрдла
// BMR = 370 + 21.6×(вес × (1 - %жира/100))

// 5. ВОЗ
// Зависит от пола и возрастной группы

// TDEE = BMR × коэффициент активности
// Коэффициенты: 1.2 / 1.375 / 1.55 / 1.725 / 1.9
```

**Выходные данные:**
| Параметр | Описание |
|----------|----------|
| BMR | Базовый метаболизм |
| TDEE | Суточная норма |
| Для похудения | TDEE - 15% |
| Для набора | TDEE + 15% |
| БЖУ | Белки/Жиры/Углеводы в граммах |
| Сравнение формул | Таблица 5 формул |

**Уникальные фичи (отстройка от beregifiguru):**
- ✅ Сравнение 5 формул в одном интерфейсе
- ✅ Визуальная шкала калорий
- ✅ Расчёт БЖУ сразу
- ✅ Анимированные результаты
- ✅ Без кнопки "Рассчитать"

---

#### 2. Калькулятор даты родов (ПДР)
**Частотность:** 150K+ запросов/мес  
**URL:** `/beremennost/data-rodov/`

**Входные параметры:**
| Параметр | Тип | Компонент |
|----------|-----|-----------|
| Метод расчёта | enum | Tabs (по месячным / по зачатию / по УЗИ) |
| Дата последних месячных | date | DatePicker |
| Длина цикла | number | Slider (21-35 дней) |
| Дата зачатия | date | DatePicker (опционально) |
| Срок по УЗИ | number | Input (недели+дни) |

**Формулы:**
```typescript
// По дате последних месячных (формула Негеле)
// ПДР = ДПМ - 3 месяца + 7 дней + (длина цикла - 28)

// По дате зачатия
// ПДР = дата зачатия + 266 дней

// По УЗИ
// ПДР = дата УЗИ + (40 недель - текущий срок)
```

**Выходные данные:**
| Параметр | Описание |
|----------|----------|
| ПДР | Предполагаемая дата родов |
| Текущий срок | Недели + дни |
| Триместр | 1/2/3 |
| Прогресс | % завершения |
| Дата зачатия | Расчётная |
| Ключевые даты | Скрининги, декрет |
| Знак зодиака | Для малыша |

**Уникальные фичи:**
- ✅ Визуальный таймлайн беременности
- ✅ Календарь с ключевыми датами
- ✅ Информация о развитии плода
- ✅ Обратный отсчёт до родов

---

#### 3. Калькулятор БЖУ
**Частотность:** 100K+ запросов/мес  
**URL:** `/pitanie/kalkulyator-bzhu/`

**Входные параметры:**
| Параметр | Тип | Компонент |
|----------|-----|-----------|
| Калории | number | Slider или расчёт |
| Тип диеты | enum | DietSelector |

**Типы диет:**
| Диета | Белки | Жиры | Углеводы |
|-------|-------|------|----------|
| Сбалансированная | 25% | 30% | 45% |
| Низкоуглеводная | 35% | 40% | 25% |
| Высокобелковая | 40% | 25% | 35% |
| Кето | 20% | 70% | 10% |
| Средиземноморская | 20% | 35% | 45% |

**Выходные данные:**
- Граммы белков, жиров, углеводов
- Визуальная диаграмма (pie chart)
- Прогресс-бары для каждого макро

**Уникальные фичи:**
- ✅ Визуальная круговая диаграмма
- ✅ 5 готовых типов диет
- ✅ Интеграция с калькулятором калорий

---

#### 4. Калькулятор ИМТ
**Частотность:** 80K+ запросов/мес  
**URL:** `/telo/kalkulyator-imt/`

**Входные параметры:**
| Параметр | Тип | Компонент | Диапазон |
|----------|-----|-----------|----------|
| Вес | number | Slider | 30-200 кг |
| Рост | number | Slider | 100-250 см |

**Формула:**
```typescript
// ИМТ = вес (кг) / (рост (м))²
```

**Категории ВОЗ:**
| ИМТ | Категория | Цвет |
|-----|-----------|------|
| < 16 | Выраженный дефицит | 🔵 |
| 16-18.5 | Дефицит массы | 🔵 |
| 18.5-25 | Норма | 🟢 |
| 25-30 | Избыточный вес | 🟡 |
| 30-35 | Ожирение I | 🔴 |
| 35-40 | Ожирение II | 🔴 |
| > 40 | Ожирение III | 🔴 |

**Выходные данные:**
| Параметр | Описание |
|----------|----------|
| ИМТ | Числовое значение |
| Категория | Текст + цвет |
| Шкала | Визуальная с маркером |
| Идеальный вес | Диапазон для нормы |
| Рекомендация | Сколько набрать/сбросить |

**Уникальные фичи:**
- ✅ Красивая визуальная шкала (как у датчика топлива)
- ✅ Анимированный маркер
- ✅ Расчёт идеального веса

---

#### 5. Калькулятор срока беременности
**Частотность:** 100K+ запросов/мес  
**URL:** `/beremennost/srok-beremennosti/`

**Входные параметры:**
| Параметр | Тип | Компонент |
|----------|-----|-----------|
| Дата последних месячных | date | DatePicker |
| Длина цикла | number | Slider |

**Выходные данные:**
| Параметр | Описание |
|----------|----------|
| Акушерский срок | Недели + дни |
| Эмбриональный срок | Недели + дни |
| Триместр | 1/2/3 |
| ПДР | Дата |
| Прогресс | Визуальный % |
| Размер плода | Сравнение с фруктами |
| Развитие | Что происходит на этой неделе |

**Уникальные фичи:**
- ✅ Визуализация размера плода
- ✅ Прогресс-бар беременности
- ✅ Информация о развитии

---

### Tier 2: Второй приоритет (месяц 2-3)

| Калькулятор | URL | Частотность |
|-------------|-----|-------------|
| Овуляция | /beremennost/ovulyatsiya/ | 80K+ |
| Идеальный вес | /telo/idealnyj-ves/ | 50K+ |
| Дефицит калорий | /pitanie/defitsit-kalorij/ | 25K+ |
| Норма воды | /pitanie/norma-vody/ | 20K+ |
| Процент жира | /telo/protsent-zhira/ | 15K+ |

### Tier 3: Третий приоритет (месяц 4-6)

| Калькулятор | URL | Частотность |
|-------------|-----|-------------|
| Менструальный цикл | /beremennost/menstrualnyj-tsikl/ | 30K+ |
| Базовый метаболизм | /telo/bazovyj-metabolizm/ | 10K+ |
| Пульс для тренировок | /sport/puls-dlya-trenirovok/ | 8K+ |
| Набор веса при беременности | /beremennost/nabor-vesa/ | 8K+ |
| Калории для похудения | /pitanie/kalorii-dlya-pohudeniya/ | 15K+ |

### Tier 4-5: Дополнительные (месяц 6+)

| Калькулятор | URL |
|-------------|-----|
| Рост ребёнка | /deti/rost-rebenka/ |
| Вес ребёнка | /deti/ves-rebenka/ |
| Тип телосложения | /telo/tip-teloslozheniya/ |
| Белок для спортсменов | /sport/belok-dlya-sportsmenov/ |
| Калории для набора массы | /pitanie/kalorii-dlya-nabora/ |

---

## 🎨 UI/UX спецификации

### Дизайн-система

#### Цветовая палитра
```css
/* Основные цвета */
--primary: #2563eb;        /* Синий */
--primary-light: #3b82f6;
--primary-dark: #1d4ed8;

/* Статусы */
--success: #22c55e;        /* Зелёный - норма */
--warning: #eab308;        /* Жёлтый - внимание */
--danger: #ef4444;         /* Красный - опасность */
--info: #3b82f6;           /* Синий - информация */

/* Нейтральные */
--background: #ffffff;
--foreground: #0f172a;
--muted: #64748b;
--border: #e2e8f0;
```

#### Типографика
```css
/* Шрифты */
font-family: 'Inter', system-ui, sans-serif;

/* Размеры */
--text-xs: 0.75rem;    /* 12px */
--text-sm: 0.875rem;   /* 14px */
--text-base: 1rem;     /* 16px */
--text-lg: 1.125rem;   /* 18px */
--text-xl: 1.25rem;    /* 20px */
--text-2xl: 1.5rem;    /* 24px */
--text-3xl: 1.875rem;  /* 30px */
--text-4xl: 2.25rem;   /* 36px */

/* Результат калькулятора */
.result-value {
  font-size: 2.25rem;  /* 36px */
  font-weight: 700;
}
```

#### Отступы и скругления
```css
/* Отступы */
--spacing-1: 0.25rem;   /* 4px */
--spacing-2: 0.5rem;    /* 8px */
--spacing-3: 0.75rem;   /* 12px */
--spacing-4: 1rem;      /* 16px */
--spacing-6: 1.5rem;    /* 24px */
--spacing-8: 2rem;      /* 32px */

/* Скругления */
--radius-sm: 0.375rem;  /* 6px */
--radius-md: 0.5rem;    /* 8px */
--radius-lg: 0.75rem;   /* 12px */
--radius-xl: 1rem;      /* 16px */
--radius-full: 9999px;  /* Круг */
```

### Компоненты

#### Карточка калькулятора
```
┌─────────────────────────────────────────────────────┐
│  [Иконка]  Название калькулятора                    │
│                                                     │
│  Описание в 1-2 строки                             │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  ФОРМА ВВОДА                                │   │
│  │                                             │   │
│  │  Пол: [Муж] [Жен]                          │   │
│  │                                             │   │
│  │  Возраст: ────────●────────── 30 лет       │   │
│  │                                             │   │
│  │  Рост:    ──────────●──────── 175 см       │   │
│  │                                             │   │
│  │  Вес:     ────────●────────── 75 кг        │   │
│  │                                             │   │
│  │  Активность: [🪑] [🚶] [🏃] [💪] [🏋️]       │   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
│  ═══════════════════════════════════════════════   │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  РЕЗУЛЬТАТ                                  │   │
│  │                                             │   │
│  │  ┌─────────────────────────────────────┐   │   │
│  │  │        2,450 ккал                   │   │   │
│  │  │        ваша норма                   │   │   │
│  │  └─────────────────────────────────────┘   │   │
│  │                                             │   │
│  │  [Визуальная шкала с маркером]             │   │
│  │                                             │   │
│  │  Для похудения:  2,080 ккал               │   │
│  │  Для набора:     2,820 ккал               │   │
│  │                                             │   │
│  │  ───────────────────────────────────────   │   │
│  │                                             │   │
│  │  Рекомендуемое БЖУ:                        │   │
│  │  Белки    ████████████░░░░  156 г (30%)   │   │
│  │  Жиры     ██████████░░░░░░   69 г (30%)   │   │
│  │  Углеводы ████████████████  208 г (40%)   │   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
└─────────────────────────────────────────────────────┘
```

#### Визуальная шкала
```
Результат: 24.5 (Норма ✓)

┌────────────────────────────────────────────────────┐
│  Дефицит  │     НОРМА     │  Избыток  │  Ожирение │
│  ─────────┼───────●───────┼───────────┼────────── │
│    <18.5  │   18.5-25     │   25-30   │    >30    │
└────────────────────────────────────────────────────┘
```

#### Сравнение формул
```
┌────────────────────────────────────────────────────┐
│  📊 Сравнение формул                              │
│                                                    │
│  Миффлина-Сан Жеора  ████████████████  2,450 ✓   │
│  Харриса-Бенедикта   ██████████████    2,380     │
│  Х-Б (1984)          ███████████████   2,420     │
│  Кетча-МакАрдла      █████████████     2,350     │
│  ВОЗ                 ████████████████  2,440     │
│                                                    │
│  Мин: 2,350  │  Среднее: 2,408  │  Макс: 2,450  │
└────────────────────────────────────────────────────┘
```

---

## 🔍 SEO требования

### Для каждой страницы

#### Metadata
```typescript
export const metadata: Metadata = {
  title: 'Ключевое слово — описание | Бренд',  // 50-60 символов
  description: 'Описание с ключевыми словами и призывом к действию',  // 150-160 символов
  keywords: ['ключ1', 'ключ2', 'ключ3'],  // 5-10 ключей
  openGraph: {
    title: 'Заголовок для соцсетей',
    description: 'Описание для соцсетей',
    type: 'website',
  },
};
```

#### JSON-LD разметка
```typescript
// WebApplication
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Калькулятор калорий",
  "description": "Онлайн калькулятор суточной нормы калорий",
  "applicationCategory": "HealthApplication",
  "operatingSystem": "Web",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "RUB"
  }
}

// FAQPage
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "Вопрос?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Ответ"
      }
    }
  ]
}

// BreadcrumbList
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "position": 1, "name": "Главная", "item": "/" },
    { "position": 2, "name": "Питание", "item": "/pitanie" },
    { "position": 3, "name": "Калькулятор калорий", "item": "/pitanie/kalkulyator-kalorij" }
  ]
}
```

#### Структура контента
```
1. H1 — один, с главным ключевым словом
2. H2 — 4-6 штук, с дополнительными ключами
3. H3 — подразделы
4. SEO-текст — минимум 1500 слов
5. FAQ — 3-5 вопросов
6. Внутренние ссылки — 2-4 на страницу
```

---

## 📱 Адаптивность

### Брейкпоинты
```css
/* Mobile first */
sm: 640px    /* Большие телефоны */
md: 768px    /* Планшеты */
lg: 1024px   /* Ноутбуки */
xl: 1280px   /* Десктопы */
```

### Требования
- Все калькуляторы должны работать на мобильных
- Слайдеры удобные для тач-экранов
- Минимальный размер тап-зоны: 44x44px
- Читаемый текст без зума

---

## ⚡ Производительность

### Целевые метрики (Lighthouse)
| Метрика | Цель | Почему важно |
|---------|------|--------------|
| Performance | > 90 | Скорость загрузки |
| Accessibility | > 90 | Доступность |
| Best Practices | > 90 | Лучшие практики |
| SEO | 100 | Поисковая оптимизация |

### Core Web Vitals
| Метрика | Цель | Что измеряет |
|---------|------|--------------|
| LCP | < 2.5s | Largest Contentful Paint |
| FID | < 100ms | First Input Delay |
| CLS | < 0.1 | Cumulative Layout Shift |

### Оптимизации
1. **SSG** — статическая генерация страниц
2. **Lazy loading** — ленивая загрузка рекламы и графиков
3. **Image optimization** — WebP/AVIF форматы
4. **Code splitting** — разделение кода
5. **Minimal JS** — минимум JavaScript

---

## 📢 Рекламные блоки

### Позиции (3 на страницу)
```
┌─────────────────────────────────────┐
│  Header                             │
├─────────────────────────────────────┤
│  Breadcrumbs                        │
│  H1 + описание                      │
├─────────────────────────────────────┤
│  ▓▓▓▓▓ AD BLOCK TOP ▓▓▓▓▓          │  ← 728x90 или 300x250
├─────────────────────────────────────┤
│  Калькулятор                        │
│  Результат                          │
├─────────────────────────────────────┤
│  ▓▓▓▓▓ AD BLOCK MIDDLE ▓▓▓▓▓       │  ← 728x90 или 300x250
├─────────────────────────────────────┤
│  SEO-контент                        │
│  FAQ                                │
├─────────────────────────────────────┤
│  ▓▓▓▓▓ AD BLOCK BOTTOM ▓▓▓▓▓       │  ← 728x90 или 300x250
├─────────────────────────────────────┤
│  Связанные калькуляторы             │
│  Footer                             │
└─────────────────────────────────────┘
```

### Размеры блоков
| Позиция | Десктоп | Мобильный |
|---------|---------|-----------|
| Top | 728x90 | 300x250 |
| Middle | 728x90 | 300x250 |
| Bottom | 728x90 | 300x250 |

---

## 🚀 План запуска

### Месяц 1
- [x] Документация и планирование
- [ ] Инфраструктура проекта
- [ ] UI-компоненты (ввод + результаты)
- [ ] Калькуляторы Tier 1 (5 шт)
- [ ] SEO-тексты для Tier 1
- [ ] Деплой на Vercel

### Месяц 2
- [ ] Калькуляторы Tier 2 (5 шт)
- [ ] Яндекс.Вебмастер + Метрика
- [ ] Оптимизация производительности
- [ ] A/B тестирование UI

### Месяц 3
- [ ] Калькуляторы Tier 3 (5 шт)
- [ ] Подключение РСЯ (при 100+ уник/день)
- [ ] Анализ поведенческих факторов

### Месяц 4-6
- [ ] Калькуляторы Tier 4-5 (10 шт)
- [ ] Оптимизация под топ-3
- [ ] Партнёрские программы

---

*Версия 2.0 | Январь 2025 | С учётом конкурентного анализа*
